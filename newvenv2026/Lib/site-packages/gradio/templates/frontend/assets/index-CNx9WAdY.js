import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as ae,tick as le}from"./svelte/svelte_svelte.js";import{U as se}from"./ModifyUpload-2md6CVWe.js";import{b as oe,V as ne,o as ie,B as Q,U as ue}from"./IconButtonWrapper-D4LMIc_2.js";import"./i18n-CyvX8KmK.js";import{Webcam as de}from"./Index-CuWCt_WW.js";import{a as R}from"./Video-06U9X4-1.js";import{l as tt,p as rt}from"./Video-06U9X4-1.js";import{P as pe,V as _e}from"./VideoPreview-_4iTmvNJ.js";import{default as lt}from"./Example-Cbvf-FzW.js";import{G as ce}from"./utils.svelte-Ceck75cM.js";import{S as X}from"./StreamingBar-C6ky6DsM.js";import"./index-Dw8Uzof1.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-C7jLnxqj.js";import"./prism-python-B1e-54E9.js";import"./ImagePreview-CBoeGuoF.js";import"./ShareButton-DGzDjeX1.js";import"./FullscreenButton-CdZP1GYm.js";import"./Image-Bdf4wQSw.js";import"./Example-1lv5JGKJ.js";var ge=e.from_html('<div class="upload-container svelte-ey25pz"><!></div>'),he=e.from_html('<div class="file-name svelte-ey25pz"> </div> <div class="file-size svelte-ey25pz"> </div>',1),ve=e.from_html('<!> <div data-testid="video" class="video-container svelte-ey25pz"><!> <!></div>',1);function me(j,a){e.push(a,!1);let s=e.prop(a,"value",12,null),f=e.prop(a,"subtitle",12,null),E=e.prop(a,"sources",28,()=>["webcam","upload"]),t=e.prop(a,"label",12,void 0),P=e.prop(a,"show_download_button",12,!1),I=e.prop(a,"show_label",12,!0),d=e.prop(a,"webcam_options",12),k=e.prop(a,"include_audio",12),x=e.prop(a,"autoplay",12),z=e.prop(a,"root",12),b=e.prop(a,"i18n",12),g=e.prop(a,"active_source",12,"webcam"),S=e.prop(a,"handle_reset_value",12,()=>{}),D=e.prop(a,"max_file_size",12,null),V=e.prop(a,"upload",12),L=e.prop(a,"stream_handler",12),o=e.prop(a,"loop",12),c=e.prop(a,"uploading",12,!1),h=e.prop(a,"upload_promise",12,null),y=e.prop(a,"playback_position",12,0),q=e.mutable_source(!1);const v=ae();function B({detail:r}){s(r),v("change",r),v("upload",r)}function w(){s(null),v("change",null),v("clear")}function T(r){e.set(q,!0),v("change",r)}function W({detail:r}){v("change",r)}let l=e.mutable_source(!1);e.legacy_pre_effect(()=>e.get(l),()=>{v("drag",e.get(l))}),e.legacy_pre_effect_reset();var H={get value(){return s()},set value(r){s(r),e.flush()},get subtitle(){return f()},set subtitle(r){f(r),e.flush()},get sources(){return E()},set sources(r){E(r),e.flush()},get label(){return t()},set label(r){t(r),e.flush()},get show_download_button(){return P()},set show_download_button(r){P(r),e.flush()},get show_label(){return I()},set show_label(r){I(r),e.flush()},get webcam_options(){return d()},set webcam_options(r){d(r),e.flush()},get include_audio(){return k()},set include_audio(r){k(r),e.flush()},get autoplay(){return x()},set autoplay(r){x(r),e.flush()},get root(){return z()},set root(r){z(r),e.flush()},get i18n(){return b()},set i18n(r){b(r),e.flush()},get active_source(){return g()},set active_source(r){g(r),e.flush()},get handle_reset_value(){return S()},set handle_reset_value(r){S(r),e.flush()},get max_file_size(){return D()},set max_file_size(r){D(r),e.flush()},get upload(){return V()},set upload(r){V(r),e.flush()},get stream_handler(){return L()},set stream_handler(r){L(r),e.flush()},get loop(){return o()},set loop(r){o(r),e.flush()},get uploading(){return c()},set uploading(r){c(r),e.flush()},get upload_promise(){return h()},set upload_promise(r){h(r),e.flush()},get playback_position(){return y()},set playback_position(r){y(r),e.flush()}};e.init();var J=ve(),K=e.first_child(J);{let r=e.derived_safe_equal(()=>t()||"Video");oe(K,{get show_label(){return I()},get Icon(){return ne},get label(){return e.get(r)}})}var M=e.sibling(K,2),N=e.child(M);{var Y=r=>{var U=ge(),A=e.child(U);{var C=u=>{{let m=e.derived_safe_equal(()=>(e.deep_read_state(b()),e.untrack(()=>b()("video.drop_to_upload"))));se(u,{filetype:"video/x-m4v,video/*",get max_file_size(){return D()},get root(){return z()},get upload(){return V()},get stream_handler(){return L()},get aria_label(){return e.get(m)},get upload_promise(){return h()},set upload_promise(n){h(n)},get dragging(){return e.get(l)},set dragging(n){e.set(l,n)},get uploading(){return c()},set uploading(n){c(n)},$$events:{load:B,error:({detail:n})=>v("error",n)},children:(n,G)=>{var p=e.comment(),_=e.first_child(p);e.slot(_,a,"default",{},null),e.append(n,p)},$$slots:{default:!0},$$legacy:!0})}},F=u=>{var m=e.comment(),n=e.first_child(m);{var G=p=>{de(p,{get root(){return z()},get mirror_webcam(){return e.deep_read_state(d()),e.untrack(()=>d().mirror)},get webcam_constraints(){return e.deep_read_state(d()),e.untrack(()=>d().constraints)},get include_audio(){return k()},mode:"video",get i18n(){return b()},get upload(){return V()},stream_every:1,$$events:{error(_){e.bubble_event.call(this,a,_)},capture:W,start_recording(_){e.bubble_event.call(this,a,_)},stop_recording(_){e.bubble_event.call(this,a,_)}}})};e.if(n,p=>{g()==="webcam"&&p(G)},!0)}e.append(u,m)};e.if(A,u=>{g()==="upload"?u(C):u(F,!1)})}e.reset(U),e.append(r,U)},Z=r=>{var U=e.comment(),A=e.first_child(U);{var C=u=>{var m=e.comment(),n=e.first_child(m);e.key(n,()=>(e.deep_read_state(s()),e.untrack(()=>s()?.url)),G=>{{let p=e.derived_safe_equal(()=>(e.deep_read_state(f()),e.untrack(()=>f()?.url))),_=e.derived_safe_equal(()=>(e.deep_read_state(d()),e.deep_read_state(g()),e.untrack(()=>d().mirror&&g()==="webcam")));pe(G,{get upload(){return V()},get root(){return z()},interactive:!0,get autoplay(){return x()},get src(){return e.deep_read_state(s()),e.untrack(()=>s().url)},get subtitle(){return e.get(p)},is_stream:!1,get mirror(){return e.get(_)},get label(){return t()},handle_change:T,get handle_reset_value(){return S()},get loop(){return o()},get value(){return s()},get i18n(){return b()},get show_download_button(){return P()},handle_clear:w,get has_change_history(){return e.get(q)},get playback_position(){return y()},set playback_position(i){y(i)},$$events:{play(i){e.bubble_event.call(this,a,i)},pause(i){e.bubble_event.call(this,a,i)},stop(i){e.bubble_event.call(this,a,i)},end(i){e.bubble_event.call(this,a,i)},error(i){e.bubble_event.call(this,a,i)}},$$legacy:!0})}}),e.append(u,m)},F=u=>{var m=e.comment(),n=e.first_child(m);{var G=p=>{var _=he(),i=e.first_child(_),ee=e.child(i,!0);e.reset(i);var O=e.sibling(i,2),te=e.child(O,!0);e.reset(O),e.template_effect(re=>{e.set_text(ee,(e.deep_read_state(s()),e.untrack(()=>s().orig_name||s().url))),e.set_text(te,re)},[()=>(e.deep_read_state(R),e.deep_read_state(s()),e.untrack(()=>R(s().size)))]),e.append(p,_)};e.if(n,p=>{e.deep_read_state(s()),e.untrack(()=>s().size)&&p(G)},!0)}e.append(u,m)};e.if(A,u=>{e.deep_read_state(s()),e.untrack(()=>s()?.url)?u(C):u(F,!1)},!0)}e.append(r,U)};e.if(N,r=>{e.deep_read_state(s()),e.untrack(()=>s()===null||s()?.url===void 0)?r(Y):r(Z,!1)})}var $=e.sibling(N,2);return ie($,{get sources(){return E()},handle_clear:w,get active_source(){return g()},set active_source(r){g(r)},$$legacy:!0}),e.reset(M),e.append(j,J),e.pop(H)}var fe=e.from_html("<!> <!>",1),be=e.from_html("<!> <!>",1);function Ze(j,a){e.push(a,!0);const s=e.rest_props(a,["$$slots","$$events","$$legacy"]);let f=e.state(void 0);class E extends ce{async get_data(){return e.get(f)&&(await e.get(f),await le()),await super.get_data()}}const t=new E(s);let P=e.state(e.proxy(t.props.value)),I=e.state(!1),d=e.state(!1),k=e.derived(()=>t.props.sources?t.props.sources[0]:void 0),x=t.props.value;e.user_effect(()=>{e.get(P)!=t.props.value&&(e.set(P,t.props.value,!0),t.dispatch("change"))});const z=()=>{x===null||t.props.value===x||(t.props.value=x)};function b({detail:o}){o!=null?t.props.value=o:t.props.value=null}function g({detail:o}){const[c,h]=o.includes("Invalid file type")?["warning","complete"]:["error","error"];t.shared.loading_status.status=h,t.shared.loading_status.message=o,t.dispatch(c,o)}var S=e.comment(),D=e.first_child(S);{var V=o=>{{let c=e.derived(()=>t.props.value===null&&e.get(k)==="upload"?"dashed":"solid"),h=e.derived(()=>e.get(d)?"focus":"base"),y=e.derived(()=>t.props.height||void 0);Q(o,{get visible(){return t.shared.visible},get variant(){return e.get(c)},get border_mode(){return e.get(h)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(y)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(q,v)=>{var B=fe(),w=e.first_child(B);X(w,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var T=e.sibling(w,2);{let W=e.derived(()=>t.props.buttons??["download","share"]);_e(T,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get autoplay(){return t.props.autoplay},get loop(){return t.props.loop},get buttons(){return e.get(W)},on_custom_button_click:l=>{t.dispatch("custom_button_click",{id:l})},get i18n(){return t.i18n},upload:(...l)=>t.shared.client.upload(...l),get playback_position(){return t.props.playback_position},set playback_position(l){t.props.playback_position=l},$$events:{play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),stop:()=>t.dispatch("stop"),end:()=>t.dispatch("end"),share:({detail:l})=>t.dispatch("share",l),error:({detail:l})=>t.dispatch("error",l)}})}e.append(q,B)},$$slots:{default:!0}})}},L=o=>{{let c=e.derived(()=>t.props.value===null&&e.get(k)==="upload"?"dashed":"solid"),h=e.derived(()=>e.get(d)?"focus":"base"),y=e.derived(()=>t.props.height||void 0);Q(o,{get visible(){return t.shared.visible},get variant(){return e.get(c)},get border_mode(){return e.get(h)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(y)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(q,v)=>{var B=be(),w=e.first_child(B);X(w,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var T=e.sibling(w,2);{let W=e.derived(()=>t.props.buttons??["download","share"]);me(T,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get buttons(){return e.get(W)},on_custom_button_click:l=>{t.dispatch("custom_button_click",{id:l})},get sources(){return t.props.sources},get active_source(){return e.get(k)},get webcam_options(){return t.props.webcam_options},get include_audio(){return t.props.include_audio},get autoplay(){return t.props.autoplay},get root(){return t.shared.root},get loop(){return t.props.loop},handle_reset_value:z,get i18n(){return t.i18n},get max_file_size(){return t.shared.max_file_size},upload:(...l)=>t.shared.client.upload(...l),stream_handler:(...l)=>t.shared.client.stream(...l),get upload_promise(){return e.get(f)},set upload_promise(l){e.set(f,l,!0)},get uploading(){return e.get(I)},set uploading(l){e.set(I,l,!0)},get playback_position(){return t.props.playback_position},set playback_position(l){t.props.playback_position=l},$$events:{change:b,drag:({detail:l})=>e.set(d,l,!0),error:g,clear:()=>{t.props.value=null,t.dispatch("clear")},play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),upload:()=>t.dispatch("upload"),stop:()=>t.dispatch("stop"),end:()=>t.dispatch("end"),start_recording:()=>t.dispatch("start_recording"),stop_recording:()=>t.dispatch("stop_recording")},children:(l,H)=>{ue(l,{get i18n(){return t.i18n},type:"video"})},$$slots:{default:!0}})}e.append(q,B)},$$slots:{default:!0}})}};e.if(D,o=>{t.shared.interactive?o(L,!1):o(V)})}e.append(j,S),e.pop()}export{lt as BaseExample,me as BaseInteractiveVideo,pe as BasePlayer,_e as BaseStaticVideo,Ze as default,tt as loaded,rt as playable,R as prettyBytes};
