const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ApiDocs-CWBInEzV.js","./clear-BJfJ8fXC.js","./i18n-CyvX8KmK.js","./index-Dw8Uzof1.js","./index-qRhMeKhs.css","./i18n-B_QTAvdM.css","./Button-CJbn8n9a.js","./Image-Bdf4wQSw.js","./Image-Da_XA0w6.css","./ImagePreview-CBoeGuoF.js","./utils.svelte-Ceck75cM.js","./IconButtonWrapper-D4LMIc_2.js","./MarkdownCode-C7jLnxqj.js","./prism-python-B1e-54E9.js","./MarkdownCode-BcyrEebA.css","./IconButtonWrapper-CxZDjgw7.css","./ShareButton-DGzDjeX1.js","./FullscreenButton-CdZP1GYm.js","./ImagePreview-CCVfwC4m.css","./Button-BZ4d-rtD.css","./StreamingBar-C6ky6DsM.js","./StreamingBar-K0YZHDYh.css","./init.svelte-As98sPl3.js","./index-tFQomdd2.js","./state.svelte-DFm6rEHb.js","./ApiDocs-YhV7c3aO.css","./ApiRecorder-BvoDwDbG.js","./ApiRecorder-CoSLrx_1.css","./Settings-CYV6AKxS.js","./Index-63mAm9d6.js","./Example-Ctdnw0MA.js","./Example-BeU1J4ps.css","./Index-CRhvQE-V.css","./Index-CjIRSv6a.js","./Index-B2BpVHOS.css","./Settings-CLQaonub.css","./Index-BDC4beZH.js","./Index-qXW7OcMb.js","./Example-C8-r9viM.js","./Example-BK-tWmkG.css","./Index-wZDUWKrz.css","./Index-WIcmpLtB.js","./Example-BjPVIe9-.js","./Example-CgIc4GLa.css","./Index-cY7HT1Ac.css","./Index-DP8ihX8q.css"])))=>i.map(i=>d[i]);
import{_ as $}from"./index-Dw8Uzof1.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{setContext as Ue,untrack as qe,onMount as Ie}from"./svelte/svelte_svelte.js";import{A as ke,v as Ge,p as Ve}from"./i18n-CyvX8KmK.js";import{writable as Be}from"./svelte/svelte_store.js";import{T as Ne}from"./StreamingBar-C6ky6DsM.js";import{d as Ze}from"./utils.svelte-Ceck75cM.js";import{A as We}from"./init.svelte-As98sPl3.js";import{L as He}from"./state.svelte-DFm6rEHb.js";function Ce(d,t){e.push(t,!0);var i,a=e.run([async()=>i=await e.async_derived(()=>t.node.component)]),s=e.comment(),o=e.first_child(s);e.async(o,[a[0]],[()=>t.node&&e.get(i)],(_,f)=>{var h=m=>{var j=e.comment(),l=e.first_child(j);e.async(l,[a[0]],[()=>t.node.props.shared_props.visible],(z,g)=>{var M=c=>{var x=e.comment(),k=e.first_child(x);e.async(k,[a[0]],void 0,R=>{e.component(k,()=>e.get(i).default,(b,v)=>{v(b,{get shared_props(){return t.node.props.shared_props},get props(){return t.node.props.props},children:(V,B)=>{var w=e.comment(),O=e.first_child(w);e.async(O,[a[0]],[()=>t.node.children&&t.node.children.length],(N,Z)=>{var ie=H=>{var J=e.comment(),ne=e.first_child(J);e.async(ne,[a[0]],[()=>t.node.children],(W,Q)=>{e.each(W,17,()=>e.get(Q),e.index,(T,re)=>{Ce(T,{get node(){return e.get(re)}})})}),e.append(H,J)};e.if(N,H=>{e.get(Z)&&H(ie)})}),e.append(V,w)},$$slots:{default:!0}})})}),e.append(c,x)};e.if(z,c=>{e.get(g)&&c(M)})}),e.append(m,j)};e.if(_,m=>{e.get(f)&&m(h)})}),e.append(d,s),e.pop()}const Je="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Qe="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",Ke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",Xe="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";let te=!1,G=null,de=[],Ye=0,ee={},$e,le,et=null,oe=[];async function tt(){if(!te)try{const d=document.title;document.title="[Sharing] Gradio Tab";const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0,selfBrowserSurface:"include"});document.title=d;const i={videoBitsPerSecond:5e6};G=new MediaRecorder(t,i),de=[],ee={},G.ondataavailable=st,G.onstop=at,G.start(1e3),te=!0,Ye=Date.now()}catch(d){le("Recording Error","Failed to start recording: "+d.message,"error")}}function it(){!te||!G||(G.stop(),te=!1)}function st(d){d.data.size>0&&de.push(d.data)}function at(){te=!1;const d=new Blob(de,{type:"video/mp4"});nt(d),(G?.stream?.getTracks()||[]).forEach(i=>i.stop())}async function nt(d){try{le("Processing video","This may take a few seconds...","info");const t=new FormData;t.append("video",d,"recording.mp4"),ee.start!==void 0&&ee.end!==void 0&&(t.append("remove_segment_start",ee.start.toString()),t.append("remove_segment_end",ee.end.toString())),oe.length>0&&t.append("zoom_effects",JSON.stringify(oe));const i=await fetch($e+"/gradio_api/process_recording",{method:"POST",body:t});if(!i.ok)throw new Error(`Server returned ${i.status}: ${i.statusText}`);const a=await i.blob(),s=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(a,s),oe=[]}catch{le("Processing Error","Failed to process recording. Saving original version.","warning");const i=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(d,i)}}function ye(d,t){const i=URL.createObjectURL(d),a=document.createElement("a");a.style.display="none",a.href=i,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(i)},100)}const rt=/^'([^]+)'$/,xe=Symbol("NOVALUE");class ot{id;inputs;outputs;cancels;pending=!1;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;component_prop_inputs=[];show_progress;functions;constructor(t){this.id=t.id,this.original_trigger_id=t.id,this.inputs=t.inputs,this.outputs=t.outputs,this.connection_type=t.connection,this.show_progress=t.show_progress,this.functions={frontend:t.js?_t(t.js,t.backend_fn,t.inputs.length,t.outputs.length):void 0,backend:t.backend_fn,backend_js:t.js_implementation?new ke(`let result = await (${t.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=t.targets,this.cancels=t.cancels,this.trigger_modes=t.trigger_mode,this.show_progress_on=t.show_progress_on||null,this.component_prop_inputs=t.component_prop_inputs||[];for(let i=0;i<t.event_specific_args?.length;i++){const a=t.event_specific_args[i];this.event_args[a]=t[a]??null}}async run(t,i,a,s){let o=i;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...o)}:(this.functions.frontend&&(o=await this.functions.frontend(i)),this.functions.backend?{type:"submit",data:t.submit(this.id,o,a,s,void 0,{"x-gradio-user":"app"})}:this.functions.frontend?{type:"data",data:o}:{type:"void",data:null})}add_trigger(t,i){this.triggers.push([t,i])}get_triggers(){return{success:this.triggers.filter(([,t])=>t==="success").map(([t])=>t),failure:this.triggers.filter(([,t])=>t==="failure").map(([t])=>t),all:this.triggers.filter(([,t])=>t==="all").map(([t])=>t)}}}class lt{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new He;constructor(t,i,a,s,o,_,f){this.add_to_api_calls=f,this.log_cb=_,this.update_state_cb=a,this.get_state_cb=s,this.rerender_cb=o,this.client=i,this.reload(t,a,s,o,i)}reload(t,i,a,s,o){const{by_id:_,by_event:f}=this.create(t);this.dependencies_by_event=f,this.dependencies_by_fn=_,this.client=o,this.update_state_cb=i,this.get_state_cb=a,this.rerender_cb=s;for(const[h,m]of this.dependencies_by_fn)for(const[j]of m.targets)this.set_event_args(j,m.event_args);this.register_loading_stati(_)}register_loading_stati(t){for(const[i,a]of t)this.loading_stati.register(a.id,a.show_progress_on||a.outputs,a.inputs,a.show_progress)}clear_loading_status(t){this.loading_stati.clear(t)}async update_loading_stati_state(){for(const[t,i]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(t),{loading_status:i},!1)}dispatch_state_change_events(t){if(t.changed_state_ids)for(const i of t.changed_state_ids)this.dependencies_by_event.get("change-"+i)?.forEach(s=>{this.dispatch({type:"fn",fn_index:s.id,target_id:i,event_data:null})})}async dispatch(t){let i;if(t.type==="fn"){const a=this.dependencies_by_fn.get(t.fn_index);a&&(i=[a])}else i=this.dependencies_by_event.get(`${t.event_name}-${t.target_id}`);for(let a=0;a<(i?.length||0);a++){const s=i?i[a]:void 0;if(s){this.cancel(s.cancels);const o=ct(s.trigger_modes,this.submissions.has(s.id));if(o==="skip")continue;if(o==="defer"){this.queue.add(s.id);continue}s.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:s.id,stream_state:null}),this.update_loading_stati_state());const _=await this.gather_state(s.inputs,s.component_prop_inputs),f=await Promise.all(s.targets.map(([l])=>this.set_event_args(l,s.event_args))),{success:h,failure:m,all:j}=s.get_triggers();try{let l=null;if(t.target_id!==void 0||t.type==="event"?l=t.target_id||null:l=s.original_trigger_id,s.connection_type==="stream"&&this.submissions.has(s.id)){const g=this.submissions.get(s.id);let M={fn_index:s.id,data:_,event_data:t.event_data};g.send_chunk(M),f.forEach(c=>c());continue}this.add_to_api_calls({fn_index:s.id,data:_,event_data:t.event_data,trigger_id:l});const z=await s.run(this.client,_,t.event_data,l);if(z.type==="void")f.forEach(g=>g());else if(z.type==="data")await this.handle_data(s.outputs,z.data),f.forEach(g=>g());else{let g=null;s.connection_type==="stream"&&!this.submissions.has(s.id)&&(g="waiting"),this.submissions.set(s.id,z.data);let M=0;e:for await(const c of z.data)if(M===0&&s.inputs.forEach(x=>{this.update_state_cb(x,{loading_status:{validation_error:null}},!1)}),M+=1,c!==null){if(c.type==="data"&&await this.handle_data(s.outputs,c.data),c.type==="status"){c.original_msg==="process_starts"&&s.connection_type==="stream"&&(g="open");const{fn_index:x,...k}=c;if(c.stage==="complete"){g="closed",h.forEach(R=>{this.dispatch({type:"fn",fn_index:R,event_data:null,target_id:l})}),this.dispatch_state_change_events(c),this.loading_stati.update({...k,status:k.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state();break e}else if(c.stage==="generating")this.dispatch_state_change_events(c),this.loading_stati.update({...k,status:k.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state();else if(c.stage==="error"){if(Array.isArray(c?.message)){c.message.forEach((b,v)=>{this.update_state_cb(s.inputs[v],{loading_status:{validation_error:b.is_valid?null:b.message,show_validation_error:!0}},!1)}),s.outputs.forEach(b=>{s.inputs.includes(b)||this.update_state_cb(b,{loading_status:{status:null}},!1)}),f.forEach(b=>b()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t));return}const R=c?.message?.replace(rt,(b,v)=>v);throw this.log_cb(c?._title??"Error",R||"",x,"error",k.duration,k.visible),new Error("Dependency function failed")}else this.loading_stati.update({...k,status:k.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state()}if(c.type==="render"){this.loading_stati.update({status:"complete",fn_index:s.id,stream_state:null}),this.update_loading_stati_state();const{layout:x,components:k,render_id:R,dependencies:b}=c.data;this.rerender_cb(k,x);const{by_id:v,by_event:V}=this.create(b);this.register_loading_stati(v),v.forEach(w=>this.dependencies_by_fn.set(w.id,w)),V.forEach((w,O)=>this.dependencies_by_event.set(O,w));const B=this.render_id_deps.get(R);B&&B.forEach(w=>{v.has(w)||this.dependencies_by_fn.delete(w)}),this.render_id_deps.set(R,new Set(Array.from(v.keys()))),this.register_loading_stati(v);break e}c.type==="log"&&this.handle_log(c)}j.forEach(c=>{this.dispatch({type:"fn",fn_index:c,event_data:null,target_id:l})}),f.forEach(c=>c()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t))}}catch{this.loading_stati.update({status:"error",fn_index:s.id,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(s.id),m.forEach(z=>{this.dispatch({type:"fn",fn_index:z,event_data:null})})}}}}create(t){const i=new Map,a=new Map,s=[];for(const o of t){const _=new ot(o);for(const[f,h]of o.targets)a.has(`${h}-${f}`)||a.set(`${h}-${f}`,[]),a.get(`${h}-${f}`)?.push(_);if(i.set(o.id,_),o.trigger_after!==void 0){const f=o.trigger_only_on_failure?"failure":o.trigger_only_on_success?"success":"all";s.push([o.id,o.trigger_after,f])}}for(const[o,_,f]of s){const h=i.get(_);h&&(h.add_trigger(o,f),h.original_trigger_id=ut(t,_))}return{by_id:i,by_event:a}}handle_log(t){const{title:i,log:a,fn_index:s,level:o,duration:_,visible:f}=t;this.log_cb(i,a,s,o,_,f)}async handle_data(t,i){await Promise.all(t.map(async(a,s)=>{const o=i[s]===void 0?xe:i[s];if(o!==xe)if(dt(o)){let _=!1,f=null;for(const[h,m]of Object.entries(o))if(h!=="__type__"){if(h==="visible"){_=!0,f=m;continue}await this.update_state_cb(t[s],{[h]:m},!1)}_&&await this.update_state_cb(t[s],{visible:f},!0)}else await this.update_state_cb(a,{value:o},!1)}))}async gather_state(t,i=[]){return(await Promise.all(t.map(a=>this.get_state_cb(a)))).map((a,s)=>i.includes(s)?a??null:a?.value??null)}async set_event_args(t,i){let a={};const s=await this.get_state_cb?.(t);if(!s)return()=>{};for(const[o]of Object.entries(i))a[o]=s?.[o]??null;return Object.keys(i).length===0?()=>{}:(await this.update_state_cb(t,i,!1),()=>{this.update_state_cb(t,a,!1)})}async cancel(t){if(t)for(const i of t){const a=this.submissions.get(i);a&&(await a.cancel(),this.loading_stati.update({status:"complete",fn_index:i,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(i))}}dispatch_load_events(){this.dependencies_by_fn.forEach(t=>{t.targets.forEach(([i,a])=>{a==="load"&&this.dispatch({type:"fn",fn_index:t.id,event_data:null,target_id:i})})})}get_fns_from_targets(t){const i=[];return this.dependencies_by_event.forEach((a,s)=>{const[,o]=s.split("-");Number(o)===t&&a.forEach(_=>{i.push(_.id)})}),i}close_stream(t){const i=this.get_fns_from_targets(t);for(const a of i){const s=this.submissions.get(a);s&&(s.close_stream(),this.submissions.delete(a)),this.loading_stati.update({status:"complete",fn_index:a,eta:0,queue:!1,stream_state:"closed"})}this.update_loading_stati_state()}}function dt(d){return typeof d=="object"&&d!==null&&"__type__"in d&&d?.__type__==="update"}function ct(d,t){return t?d==="always_last"?"defer":d==="multiple"?"run":d==="once"?"skip":"run":"run"}function _t(d,t,i,a){const s=t?i===1:a===1;try{return new ke("__fn_args",`  let result = await (${d})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${s} && !Array.isArray(result)) ? [result] : result;`)}catch(o){throw o}}function ut(d,t){let i=new Map,a=t,s=0;for(;s<100;){const o=i.get(a)||d.find(_=>_.id===a);if(!o||(i.set(o.id,o),o.trigger_after===null||o.trigger_after===void 0))break;a=o.trigger_after,s+=1}return a}var ft=e.from_html("<!> <!>",1),gt=e.from_html('<button class="show-api svelte-zxu34v"><!> <img class="svelte-zxu34v"/></button>'),pt=e.from_html('<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer"> <img class="svelte-zxu34v"/></a>',1),ht=e.from_html('<div>·</div> <button class="settings svelte-zxu34v"> <img class="svelte-zxu34v"/></button>',1),vt=e.from_html('<footer class="svelte-zxu34v"><!> <!> <button> <img class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> <!></footer>'),mt=e.from_html('<div id="api-recorder-container" class="svelte-zxu34v"><!></div>'),bt=e.from_html('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),wt=e.from_html('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),yt=e.from_html('<div class="wrap svelte-zxu34v"><div class="contain svelte-zxu34v"><!></div> <!> <!> <!> <!> <!></div> <!>',1);function xt(d,t){e.push(t,!0);const i=()=>e.store_get(Ge,"$reactive_formatter",s),a=()=>e.store_get(Ee,"$is_screen_recording",s),[s,o]=e.setup_stores();e.prop(t,"render_complete",3,!1);let _=e.prop(t,"ready",15,!1),f=e.prop(t,"reload_count",11,0),h=e.prop(t,"add_new_message",15);t.components.forEach(n=>{n.props.i18n||(n.props.i18n=i())});let m=e.state(e.proxy([]));function j(n,r,u){if(r==="share"){const{title:p,description:C}=u}else if(r==="error")T("Error",u,-1,r,10,!0);else if(r==="warning")T("Warning",u,-1,r,10,!0);else if(r==="info")T("Info",u,-1,r,10,!0);else if(r==="gradio_expand"||r==="gradio_tab_select"){const p=r==="gradio_expand"?n:u.component_id;l.render_previously_invisible_children(p)}else if(r=="clear_status")l.update_state(n,{loading_status:{}},!1),x.clear_loading_status(n);else if(r=="close_stream")x.close_stream(n);else if(r==="custom_button_click"){const p=u.id;z(p,"click",null)}else r==="select"&&n in l.initial_tabs&&(n=u.id),x.dispatch({type:"event",event_name:r,target_id:n,event_data:u})}let l=new We(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll},t.app,i(),j);function z(n,r,u){x.dispatch({type:"event",event_name:r,target_id:n,event_data:u})}Ue(Ze,{register:l.register_component.bind(l),dispatcher:j});let g=e.state(e.proxy([])),M=e.state(null),c=n=>{e.set(M,n,!0),e.get(v)&&e.set(g,[...e.get(g),e.get(M)],!0)},x=new lt(t.dependencies,t.app,l.update_state.bind(l),l.get_state.bind(l),l.rerender.bind(l),T,c);e.user_effect(()=>{f(),qe(()=>{l.reload(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll}),x.reload(t.dependencies,l.update_state.bind(l),l.get_state.bind(l),l.rerender.bind(l),t.app)})});let k=350,R=e.derived(()=>t.search_params.get("view")==="api"&&t.footer_links.includes("api")),b=e.derived(()=>t.search_params.get("view")==="settings"),v=e.derived(()=>t.search_params.get("view")==="api-recorder"&&t.footer_links.includes("api")),V=!0,B=!0,w=null,O=null,N=null,Z=e.state(null);async function ie(){if(!w||!O){const n=await $(()=>import("./ApiDocs-CWBInEzV.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url),r=await $(()=>import("./ApiRecorder-BvoDwDbG.js"),__vite__mapDeps([26,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,27]),import.meta.url);w||(w=n?.default),O||(O=r?.default)}}async function H(){O||(O=(await $(()=>import("./ApiRecorder-BvoDwDbG.js"),__vite__mapDeps([26,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,27]),import.meta.url)).default)}async function J(){N||(N=(await $(()=>import("./Settings-CYV6AKxS.js"),__vite__mapDeps([28,2,3,4,5,1,29,10,11,12,13,14,15,20,21,30,31,32,33,34,22,23,24,35]),import.meta.url)).default)}async function ne(){if(!e.get(Z)){const n=await $(()=>import("./Index-BDC4beZH.js"),__vite__mapDeps([36,3,4,37,2,5,10,20,11,12,13,14,15,21,38,39,40,41,42,43,44,45]),import.meta.url);e.set(Z,n.default,!0)}}async function W(n){e.set(v,!1),n&&await ie(),e.set(R,n);let r=new URLSearchParams(window.location.search);n?r.set("view","api"):r.delete("view"),history.replaceState(null,"","?"+r.toString())}async function Q(n){n&&await J();let r=new URLSearchParams(window.location.search);n?r.set("view","settings"):r.delete("view"),history.replaceState(null,"","?"+r.toString()),e.set(b,!e.get(b))}function T(n,r,u,p,C=10,D=!1){D&&e.get(m).push({title:n,message:r,fn_index:u,type:p,id:++re,duration:C,visible:D})}h(T);let re=-1;i()("blocks.long_requests_queue"),i()("blocks.connection_can_break"),i()("blocks.waiting_for_inputs");let Ee=Be(!1),ce=0,K;function _e(){if("parentIFrame"in window){const n=K.children[0].getBoundingClientRect();if(!n)return;window.parentIFrame?.size(n.bottom+ce+32)}}function ue(){a()?it():tt()}Ie(()=>{"parentIFrame"in window&&window.parentIFrame?.autoResize(!1);const n=new MutationObserver(_e),r=new ResizeObserver(_e);return n.observe(K,{childList:!0,subtree:!0,attributes:!0}),r.observe(K),l.ready.then(()=>{_(!0),x.dispatch_load_events()}),t.vibe_mode&&ne(),()=>{n.disconnect(),r.disconnect()}});function Le(n){e.set(m,e.get(m).filter(r=>r.id!==n),!0)}var fe=yt();e.head("zxu34v",n=>{var r=ft(),u=e.first_child(r);{var p=y=>{e.deferred_template_effect(()=>{e.document.title=t.title??""})};e.if(u,y=>{t.control_page_title&&y(p)})}var C=e.sibling(u,2);{var D=y=>{var A=e.comment(),ae=e.first_child(A);e.html(ae,()=>`<style>${Ve(t.css,t.version)}</style>`),e.append(y,A)};e.if(C,y=>{t.css&&y(D)})}e.append(n,r)});var se=e.first_child(fe);let ge;var X=e.child(se);let pe;var Se=e.child(X);Ce(Se,{get node(){return l.root}}),e.reset(X),e.bind_this(X,n=>K=n,()=>K);var he=e.sibling(X,2);{var ze=n=>{var r=vt(),u=e.child(r);{var p=E=>{var L=gt(),P=e.child(L);{var U=S=>{var I=e.text();e.template_effect(Y=>e.set_text(I,Y),[()=>i()("errors.use_via_api_or_mcp")]),e.append(S,I)},F=S=>{var I=e.text();e.template_effect(Y=>e.set_text(I,Y),[()=>i()("errors.use_via_api")]),e.append(S,I)};e.if(P,S=>{t.app.config?.mcp_server?S(U):S(F,!1)})}var q=e.sibling(P,2);e.reset(L),e.template_effect(S=>{e.set_attribute(q,"src",Qe),e.set_attribute(q,"alt",S)},[()=>i()("common.logo")]),e.event("click",L,()=>{W(!e.get(R))}),e.event("mouseenter",L,()=>{ie(),H()}),e.append(E,L)};e.if(u,E=>{t.footer_links.includes("api")&&E(p)})}var C=e.sibling(u,2);{var D=E=>{var L=pt(),P=e.sibling(e.first_child(L),2),U=e.child(P),F=e.sibling(U);e.reset(P),e.template_effect((q,S)=>{e.set_text(U,`${q??""} `),e.set_attribute(F,"src",Je),e.set_attribute(F,"alt",S)},[()=>i()("common.built_with_gradio"),()=>i()("common.logo")]),e.append(E,L)};e.if(C,E=>{t.footer_links.includes("gradio")&&E(D)})}var y=e.sibling(C,2);let A;var ae=e.child(y),we=e.sibling(ae);e.reset(y);var Pe=e.sibling(y,4);{var Te=E=>{var L=ht(),P=e.first_child(L);let U;var F=e.sibling(P,2),q=e.child(F),S=e.sibling(q);e.reset(F),e.template_effect((I,Y)=>{U=e.set_class(P,1,"divider svelte-zxu34v",null,U,{hidden:!a()}),e.set_text(q,`${I??""} `),e.set_attribute(S,"src",Ke),e.set_attribute(S,"alt",Y)},[()=>i()("common.settings"),()=>i()("common.settings")]),e.event("click",F,()=>{Q(!e.get(b))}),e.event("mouseenter",F,()=>{J()}),e.append(E,L)};e.if(Pe,E=>{t.footer_links.includes("settings")&&E(Te)})}e.reset(r),e.template_effect((E,L)=>{A=e.set_class(y,1,"record svelte-zxu34v",null,A,{hidden:!a()}),e.set_text(ae,`${E??""} `),e.set_attribute(we,"src",Xe),e.set_attribute(we,"alt",L)},[()=>i()("common.stop_recording"),()=>i()("common.stop_recording")]),e.event("click",y,()=>{ue()}),e.bind_element_size(r,"clientHeight",E=>ce=E),e.append(n,r)};e.if(he,n=>{t.footer_links.length>0&&n(ze)})}var ve=e.sibling(he,2);{var Re=n=>{var r=mt(),u=e.child(r);e.component(u,()=>O,(p,C)=>{C(p,{get api_calls(){return e.get(g)},get dependencies(){return t.dependencies}})}),e.reset(r),e.event("click",r,()=>{W(!0),e.set(v,!1)}),e.append(n,r)};e.if(ve,n=>{e.get(v)&&O&&n(Re)})}var me=e.sibling(ve,2);{var Oe=n=>{var r=bt(),u=e.child(r),p=e.sibling(u,2),C=e.child(p);e.component(C,()=>w,(D,y)=>{y(D,{get root_node(){return l.root},get dependencies(){return t.dependencies},get root(){return t.root},get app(){return t.app},get space_id(){return t.space_id},get api_calls(){return e.get(g)},get username(){return t.username},get last_api_call(){return e.get(M)},$$events:{close:A=>{W(!1),e.set(g,[],!0),e.set(v,e.set(v,A.detail?.api_recorder_visible))}}})}),e.reset(p),e.reset(r),e.event("click",u,()=>{W(!1)}),e.append(n,r)};e.if(me,n=>{e.get(R)&&l.root&&w&&n(Oe)})}var be=e.sibling(me,2);{var Ae=n=>{var r=wt(),u=e.child(r),p=e.sibling(u,2),C=e.child(p);e.component(C,()=>N,(D,y)=>{y(D,{onclose:()=>{Q(!1)},start_recording:()=>{ue()},get pwa_enabled(){return t.app.config.pwa},get root(){return t.root},get space_id(){return t.space_id},get i18n(){return i()},get allow_zoom(){return V},set allow_zoom(A){V=A},get allow_video_trim(){return B},set allow_video_trim(A){B=A}})}),e.reset(p),e.reset(r),e.event("click",u,()=>{Q(!1)}),e.append(n,r)};e.if(be,n=>{e.get(b)&&t.app.config&&l.root&&N&&n(Ae)})}var Me=e.sibling(be,2);{var De=n=>{var r=e.comment(),u=e.first_child(r);e.component(u,()=>e.get(Z),(p,C)=>{C(p,{get app(){return t.app},get root(){return t.root}})}),e.append(n,r)};e.if(Me,n=>{t.vibe_mode&&e.get(Z)&&n(De)})}e.reset(se);var je=e.sibling(se,2);{var Fe=n=>{Ne(n,{get messages(){return e.get(m)},on_close:Le})};e.if(je,n=>{e.get(m)&&n(Fe)})}e.template_effect(()=>{ge=e.set_style(se,"",ge,{"min-height":t.app_mode?"100%":"auto"}),pe=e.set_style(X,"",pe,{"flex-grow":t.app_mode?"1":"auto","margin-right":t.vibe_mode?`${k}px`:"0"})}),e.append(d,fe),e.pop(),o()}const Mt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));export{Mt as B,Qe as a,Ke as s};
