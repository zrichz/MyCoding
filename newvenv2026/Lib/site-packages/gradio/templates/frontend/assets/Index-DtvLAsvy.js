import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as Te,beforeUpdate as ze,afterUpdate as Be,tick as q}from"./svelte/svelte_svelte.js";import"./svelte/svelte_internal_flags_legacy.js";import{e as Se,c as Ee,g as Ce,h as Ie,I as qe,S as Fe,i as De,B as Pe}from"./IconButtonWrapper-D4LMIc_2.js";import"./i18n-CyvX8KmK.js";import{S as Ye}from"./StreamingBar-C6ky6DsM.js";import{G as Ge}from"./utils.svelte-Ceck75cM.js";import{default as kt}from"./Example-gF45j9DF.js";import"./MarkdownCode-C7jLnxqj.js";import"./index-Dw8Uzof1.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./prism-python-B1e-54E9.js";var Ke=e.from_html('<div class="validation-error svelte-1hguek3"> </div>'),Le=e.from_html(" <!>",1),Me=e.from_html('<input data-testid="textbox" type="text"/>'),Ue=e.from_html('<input data-testid="password" type="password" autocomplete=""/>'),We=e.from_html('<input data-testid="textbox" type="email" autocomplete="email"/>'),je=e.from_html('<textarea data-testid="textbox"></textarea>'),Ae=e.from_html("<button><!></button>"),Je=e.from_html("<button><!></button>"),Ne=e.from_html('<label><!> <!> <div class="input-container svelte-1hguek3"><!> <!> <!></div></label>');function Oe(R,n){e.push(n,!1);let c=e.prop(n,"value",12,""),r=e.prop(n,"value_is_output",12,!1),p=e.prop(n,"lines",12,1),T=e.prop(n,"placeholder",12,""),Y=e.prop(n,"label",12),G=e.prop(n,"info",12,void 0),S=e.prop(n,"disabled",12,!1),x=e.prop(n,"show_label",12,!0),M=e.prop(n,"container",12,!0),z=e.prop(n,"max_lines",12,void 0),w=e.prop(n,"type",12,"text"),H=e.prop(n,"buttons",12,null),K=e.prop(n,"on_custom_button_click",12,null),v=e.prop(n,"submit_btn",12,null),B=e.prop(n,"stop_btn",12,null),m=e.prop(n,"rtl",12,!1),C=e.prop(n,"autofocus",12,!1),F=e.prop(n,"text_align",12,void 0),U=e.prop(n,"autoscroll",12,!0),D=e.prop(n,"max_length",12,void 0),l=e.prop(n,"html_attributes",12,null),y=e.prop(n,"validation_error",12,void 0),f=e.mutable_source(),W=e.mutable_source(!1),V,X,ee=0,j=!1,k=e.mutable_source();const oe=!v(),E=Te();ze(()=>{!j&&e.get(f)&&e.get(f).offsetHeight+e.get(f).scrollTop>e.get(f).scrollHeight-100&&(X=!0)});const ue=()=>{X&&U()&&!j&&e.get(f).scrollTo(0,e.get(f).scrollHeight)};async function _e(){await q(),E("change",c())}Be(()=>{C()&&e.get(f).focus(),X&&U()&&ue(),r(!1)});async function ce(){"clipboard"in navigator&&(await navigator.clipboard.writeText(c()),E("copy",{value:c()}),de())}function de(){e.set(W,!0),V&&clearTimeout(V),V=setTimeout(()=>{e.set(W,!1)},1e3)}function A(t){const a=t.target,o=a.value,i=[a.selectionStart,a.selectionEnd];E("select",{value:o.substring(...i),index:i})}async function J(t){t.key==="Enter"&&t.shiftKey&&p()>1?(t.preventDefault(),await q(),E("submit")):t.key==="Enter"&&!t.shiftKey&&p()===1&&e.get(k)>=1&&(t.preventDefault(),await q(),E("submit")),await q(),E("input",c())}function pe(t){const a=t.target,o=a.scrollTop;o<ee&&(j=!0),ee=o;const i=a.scrollHeight-a.clientHeight;o>=i&&(j=!1)}function fe(){E("stop")}function he(){E("submit")}async function N(t){if(await q(),p()===e.get(k))return;const a=t.target,o=window.getComputedStyle(a),i=parseFloat(o.paddingTop),g=parseFloat(o.paddingBottom),b=parseFloat(o.lineHeight);let s=e.get(k)===void 0?!1:i+g+b*e.get(k),u=i+g+p()*b;a.style.height="1px";let h;s&&a.scrollHeight>s?h=s:a.scrollHeight<u?h=u:h=a.scrollHeight,a.style.height=`${h}px`,be(a)}function be(t){const a=t.scrollHeight,o=t.clientHeight,i=parseFloat(window.getComputedStyle(t).lineHeight);a>o+i?t.style.overflowY="scroll":t.style.overflowY="hidden"}function ge(t,a){if(!(p()===e.get(k)||p()===1&&e.get(k)===1)&&(t.style.overflowY="scroll",t.addEventListener("input",N),!!a.trim()))return N({target:t}),{destroy:()=>t.removeEventListener("input",N)}}e.legacy_pre_effect(()=>(e.deep_read_state(z()),e.deep_read_state(w()),e.deep_read_state(p())),()=>{z()===void 0||z()===null?w()==="text"?e.set(k,Math.max(p(),20)):e.set(k,1):e.set(k,Math.max(z(),p()))}),e.legacy_pre_effect(()=>e.deep_read_state(c()),()=>{c()===null&&c("")}),e.legacy_pre_effect(()=>(e.deep_read_state(c()),e.deep_read_state(y()),e.get(f),e.deep_read_state(p()),e.get(k)),()=>{c(),y(),e.get(f)&&p()!==e.get(k)&&p()>1&&N({target:e.get(f)})}),e.legacy_pre_effect(()=>e.deep_read_state(c()),()=>{c(),_e()}),e.legacy_pre_effect_reset();var ve={get value(){return c()},set value(t){c(t),e.flush()},get value_is_output(){return r()},set value_is_output(t){r(t),e.flush()},get lines(){return p()},set lines(t){p(t),e.flush()},get placeholder(){return T()},set placeholder(t){T(t),e.flush()},get label(){return Y()},set label(t){Y(t),e.flush()},get info(){return G()},set info(t){G(t),e.flush()},get disabled(){return S()},set disabled(t){S(t),e.flush()},get show_label(){return x()},set show_label(t){x(t),e.flush()},get container(){return M()},set container(t){M(t),e.flush()},get max_lines(){return z()},set max_lines(t){z(t),e.flush()},get type(){return w()},set type(t){w(t),e.flush()},get buttons(){return H()},set buttons(t){H(t),e.flush()},get on_custom_button_click(){return K()},set on_custom_button_click(t){K(t),e.flush()},get submit_btn(){return v()},set submit_btn(t){v(t),e.flush()},get stop_btn(){return B()},set stop_btn(t){B(t),e.flush()},get rtl(){return m()},set rtl(t){m(t),e.flush()},get autofocus(){return C()},set autofocus(t){C(t),e.flush()},get text_align(){return F()},set text_align(t){F(t),e.flush()},get autoscroll(){return U()},set autoscroll(t){U(t),e.flush()},get max_length(){return D()},set max_length(t){D(t),e.flush()},get html_attributes(){return l()},set html_attributes(t){l(t),e.flush()},get validation_error(){return y()},set validation_error(t){y(t),e.flush()}};e.init();var O=Ne();let te;var ae=e.child(O);{var me=t=>{Ee(t,{get buttons(){return H()},get on_custom_button_click(){return K()},children:(a,o)=>{var i=e.comment(),g=e.first_child(i);{var b=s=>{{let u=e.derived_safe_equal(()=>e.get(W)?Ce:Ie),h=e.derived_safe_equal(()=>e.get(W)?"Copied":"Copy");qe(s,{get Icon(){return e.get(u)},get label(){return e.get(h)},$$events:{click:ce}})}};e.if(g,s=>{e.deep_read_state(H()),e.untrack(()=>H().some(u=>typeof u=="string"&&u==="copy"))&&s(b)})}e.append(a,i)},$$slots:{default:!0}})};e.if(ae,t=>{e.deep_read_state(x()),e.deep_read_state(H()),e.untrack(()=>x()&&H()&&H().length>0)&&t(me)})}var re=e.sibling(ae,2);{let t=e.derived_safe_equal(()=>y()?!0:x());Se(re,{get show_label(){return e.get(t)},get info(){return G()},children:(a,o)=>{e.next();var i=Le(),g=e.first_child(i),b=e.sibling(g);{var s=u=>{var h=Ke(),Z=e.child(h,!0);e.reset(h),e.template_effect(()=>e.set_text(Z,y())),e.append(u,h)};e.if(b,u=>{y()&&u(s)})}e.template_effect(()=>e.set_text(g,`${Y()??""} `)),e.append(a,i)},$$slots:{default:!0}})}var le=e.sibling(re,2),se=e.child(le);{var xe=t=>{var a=e.comment(),o=e.first_child(a);{var i=b=>{var s=Me();e.remove_input_defaults(s);let u;e.autofocus(s,C()),e.bind_this(s,h=>e.set(f,h),()=>e.get(f)),e.template_effect(()=>{u=e.set_class(s,1,"scroll-hide svelte-1hguek3",null,u,{"validation-error":y()}),e.set_attribute(s,"dir",m()?"rtl":"ltr"),e.set_attribute(s,"placeholder",T()),s.disabled=S(),e.set_attribute(s,"maxlength",D()),e.set_style(s,F()?"text-align: "+F():""),e.set_attribute(s,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(s,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(s,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(s,"autocomplete",(e.deep_read_state(l()),e.untrack(()=>l()?.autocomplete))),e.set_attribute(s,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(s,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(s,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang))),s.dir=s.dir}),e.bind_value(s,c),e.event("keypress",s,J),e.event("blur",s,function(h){e.bubble_event.call(this,n,h)}),e.event("select",s,A),e.event("focus",s,function(h){e.bubble_event.call(this,n,h)}),e.append(b,s)},g=b=>{var s=e.comment(),u=e.first_child(s);{var h=P=>{var _=Ue();e.remove_input_defaults(_);let Q;e.autofocus(_,C()),e.bind_this(_,I=>e.set(f,I),()=>e.get(f)),e.template_effect(()=>{Q=e.set_class(_,1,"scroll-hide svelte-1hguek3",null,Q,{"validation-error":y()}),e.set_attribute(_,"placeholder",T()),_.disabled=S(),e.set_attribute(_,"maxlength",D()),e.set_attribute(_,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(_,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(_,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(_,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(_,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(_,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang)))}),e.bind_value(_,c),e.event("keypress",_,J),e.event("blur",_,function(I){e.bubble_event.call(this,n,I)}),e.event("select",_,A),e.event("focus",_,function(I){e.bubble_event.call(this,n,I)}),e.append(P,_)},Z=P=>{var _=e.comment(),Q=e.first_child(_);{var I=$=>{var d=We();e.remove_input_defaults(d);let ie;e.autofocus(d,C()),e.bind_this(d,L=>e.set(f,L),()=>e.get(f)),e.template_effect(()=>{ie=e.set_class(d,1,"scroll-hide svelte-1hguek3",null,ie,{"validation-error":y()}),e.set_attribute(d,"placeholder",T()),d.disabled=S(),e.set_attribute(d,"maxlength",D()),e.set_attribute(d,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(d,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(d,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(d,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(d,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(d,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang)))}),e.bind_value(d,c),e.event("keypress",d,J),e.event("blur",d,function(L){e.bubble_event.call(this,n,L)}),e.event("select",d,A),e.event("focus",d,function(L){e.bubble_event.call(this,n,L)}),e.append($,d)};e.if(Q,$=>{w()==="email"&&$(I)},!0)}e.append(P,_)};e.if(u,P=>{w()==="password"?P(h):P(Z,!1)},!0)}e.append(b,s)};e.if(o,b=>{w()==="text"?b(i):b(g,!1)})}e.append(t,a)},ke=t=>{var a=je();e.remove_textarea_child(a),e.autofocus(a,C());let o;e.action(a,(i,g)=>ge?.(i,g),c),e.effect(()=>e.bind_value(a,c)),e.bind_this(a,i=>e.set(f,i),()=>e.get(f)),e.effect(()=>e.event("keypress",a,J)),e.effect(()=>e.event("blur",a,function(i){e.bubble_event.call(this,n,i)})),e.effect(()=>e.event("select",a,A)),e.effect(()=>e.event("focus",a,function(i){e.bubble_event.call(this,n,i)})),e.effect(()=>e.event("scroll",a,pe)),e.template_effect(()=>{e.set_attribute(a,"dir",m()?"rtl":"ltr"),e.set_attribute(a,"placeholder",T()),e.set_attribute(a,"rows",p()),a.disabled=S(),e.set_attribute(a,"maxlength",D()),e.set_style(a,F()?"text-align: "+F():""),e.set_attribute(a,"autocapitalize",(e.deep_read_state(l()),e.untrack(()=>l()?.autocapitalize))),e.set_attribute(a,"autocorrect",(e.deep_read_state(l()),e.untrack(()=>l()?.autocorrect))),e.set_attribute(a,"spellcheck",(e.deep_read_state(l()),e.untrack(()=>l()?.spellcheck))),e.set_attribute(a,"autocomplete",(e.deep_read_state(l()),e.untrack(()=>l()?.autocomplete))),e.set_attribute(a,"tabindex",(e.deep_read_state(l()),e.untrack(()=>l()?.tabindex))),e.set_attribute(a,"enterkeyhint",(e.deep_read_state(l()),e.untrack(()=>l()?.enterkeyhint))),e.set_attribute(a,"lang",(e.deep_read_state(l()),e.untrack(()=>l()?.lang))),o=e.set_class(a,1,"svelte-1hguek3",null,o,{"no-label":!x()&&(v()||B()),"validation-error":y()}),a.dir=a.dir}),e.append(t,a)};e.if(se,t=>{p()===1&&e.get(k)===1?t(xe):t(ke,!1)})}var ne=e.sibling(se,2);{var ye=t=>{var a=Ae();let o;var i=e.child(a);{var g=s=>{Fe(s)},b=s=>{var u=e.text();e.template_effect(()=>e.set_text(u,v())),e.append(s,u)};e.if(i,s=>{v()===!0?s(g):s(b,!1)})}e.reset(a),e.template_effect(()=>o=e.set_class(a,1,"submit-button svelte-1hguek3",null,o,{"padded-button":v()!==!0})),e.event("click",a,he),e.append(t,a)};e.if(ne,t=>{v()&&t(ye)})}var we=e.sibling(ne,2);{var He=t=>{var a=Je();let o;var i=e.child(a);{var g=s=>{De(s,{fill:"none",stroke_width:2.5})},b=s=>{var u=e.text();e.template_effect(()=>e.set_text(u,B())),e.append(s,u)};e.if(i,s=>{B()===!0?s(g):s(b,!1)})}e.reset(a),e.template_effect(()=>o=e.set_class(a,1,"stop-button svelte-1hguek3",null,o,{"padded-button":B()!==!0})),e.event("click",a,fe),e.append(t,a)};e.if(we,t=>{B()&&t(He)})}return e.reset(le),e.reset(O),e.template_effect(()=>te=e.set_class(O,1,"svelte-1hguek3",null,te,{container:M(),show_textbox_border:oe})),e.append(R,O),e.pop(ve)}var Qe=e.from_html("<!> <!>",1);function vt(R,n){e.push(n,!0);let c=e.rest_props(n,["$$slots","$$events","$$legacy"]);const r=new Ge(c);let p=e.derived(()=>r.shared.label||"Textbox");r.props.value=r.props.value??"";let T=e.state(e.proxy(r.props.value));async function Y(){e.get(T)!==r.props.value&&(e.set(T,r.props.value,!0),await q(),r.dispatch("change",e.snapshot(r.props.value)))}async function G(x){!r.shared||!r.props||(r.props.validation_error=null,r.props.value=x,await q(),r.dispatch("input"))}e.user_effect(()=>{Y()});function S(x){!r.shared||!r.props||(r.props.validation_error=null,r.props.value=x)}Pe(R,{get visible(){return r.shared.visible},get elem_id(){return r.shared.elem_id},get elem_classes(){return r.shared.elem_classes},get scale(){return r.shared.scale},get min_width(){return r.shared.min_width},allow_overflow:!1,get padding(){return r.shared.container},children:(x,M)=>{var z=Qe(),w=e.first_child(z);{var H=v=>{Ye(v,e.spread_props({get autoscroll(){return r.shared.autoscroll},get i18n(){return r.i18n}},()=>r.shared.loading_status,{show_validation_error:!1,on_clear_status:()=>r.dispatch("clear_status",r.shared.loading_status)}))};e.if(w,v=>{r.shared.loading_status&&v(H)})}var K=e.sibling(w,2);{let v=e.derived(()=>r.shared?.loading_status?.validation_error||r.shared?.validation_error),B=e.derived(()=>!r.shared.interactive);Oe(K,{get value(){return r.props.value},get label(){return e.get(p)},get info(){return r.props.info},get show_label(){return r.shared.show_label},get lines(){return r.props.lines},get type(){return r.props.type},get rtl(){return r.props.rtl},get text_align(){return r.props.text_align},get max_lines(){return r.props.max_lines},get placeholder(){return r.props.placeholder},get submit_btn(){return r.props.submit_btn},get stop_btn(){return r.props.stop_btn},get buttons(){return r.props.buttons},get autofocus(){return r.props.autofocus},get container(){return r.shared.container},get autoscroll(){return r.shared.autoscroll},get max_length(){return r.props.max_length},get html_attributes(){return r.props.html_attributes},get validation_error(){return e.get(v)},on_custom_button_click:m=>{r.dispatch("custom_button_click",{id:m})},get disabled(){return e.get(B)},$$events:{change:m=>S(m.detail),input:m=>G(m.detail),submit:()=>{r.shared.validation_error=null,r.dispatch("submit")},blur:()=>r.dispatch("blur"),select:m=>r.dispatch("select",m.detail),focus:()=>r.dispatch("focus"),stop:()=>r.dispatch("stop"),copy:m=>r.dispatch("copy",m.detail)}})}e.append(x,z)},$$slots:{default:!0}}),e.pop()}export{kt as BaseExample,Oe as BaseTextbox,vt as default};
