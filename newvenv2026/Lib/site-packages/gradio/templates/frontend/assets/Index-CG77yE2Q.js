import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as fe,onMount as me,tick as he}from"./svelte/svelte_svelte.js";import"./i18n-CyvX8KmK.js";import{G as ge}from"./utils.svelte-Ceck75cM.js";import"./svelte/svelte_internal_flags_legacy.js";import{t as D}from"./tinycolor-CTCHxbWk.js";import{e as be,p as we,B as ye}from"./IconButtonWrapper-D4LMIc_2.js";import{S as xe}from"./StreamingBar-C6ky6DsM.js";import{default as lt}from"./Example-DQetu39U.js";import"./svelte/svelte_store.js";import"./index-Dw8Uzof1.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-C7jLnxqj.js";import"./prism-python-B1e-54E9.js";function ke(o,n){const i=t=>{o&&!o.contains(t.target)&&!t.defaultPrevented&&n(t)};return document.addEventListener("mousedown",i,!0),{destroy(){document.removeEventListener("mousedown",i,!0)}}}function W(o){const n=o.s,i=o.v;let t=n*i;const v=o.h/60;let u=t*(1-Math.abs(v%2-1));const c=i-t;t=t+c,u=u+c;const m=Math.floor(v)%6,_=[t,u,c,c,u,t][m],p=[u,t,t,u,c,c][m],h=[c,c,u,t,t,u][m];return`rgba(${_*255}, ${p*255}, ${h*255}, ${o.a})`}function $e(o,n){return n==="hex"?D(o).toHexString():n==="rgb"?D(o).toRgbString():D(o).toHslString()}var Be=e.from_html("<button> </button>"),Me=e.from_html('<div class="color-picker svelte-nbn1m9"><div class="color-gradient svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="hue-slider svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="input svelte-nbn1m9"><button class="swatch svelte-nbn1m9"></button> <div><div class="input-wrap svelte-nbn1m9"><input type="text" class="svelte-nbn1m9"/> <button class="eyedropper svelte-nbn1m9"><!></button></div> <div class="buttons svelte-nbn1m9"></div></div></div></div>'),Ee=e.from_html('<!> <button class="dialog-button svelte-nbn1m9"></button> <!>',1);function Re(o,n){e.push(n,!1);const i=e.mutable_source();let t=e.prop(n,"value",12,"#000000"),v=e.prop(n,"label",12),u=e.prop(n,"info",12,void 0),c=e.prop(n,"disabled",12,!1),m=e.prop(n,"show_label",12,!0),_=e.prop(n,"current_mode",12,"hex"),p=e.prop(n,"dialog_open",12,!1),h=e.mutable_source(!1),g=e.mutable_source(),b=e.mutable_source();const w=fe();let y=e.mutable_source([0,0]),d=null,E=!1,R=[0,0],$=e.mutable_source(0),X=e.mutable_source(0),f=null,C=!1;function Z(r){f=r.currentTarget.getBoundingClientRect(),C=!0,Y(r.clientX)}function Y(r){if(!f)return;const s=Math.max(0,Math.min(r-f.left,f.width));e.set(X,s);const a=s/f.width*360;e.set($,a),t(W({h:a,s:R[0],v:R[1],a:1})),w("input")}function q(r,s){if(!d)return;const a=Math.max(0,Math.min(r-d.left,d.width)),x=Math.max(0,Math.min(s-d.top,d.height));e.set(y,[a,x]);const k={h:e.get($)*1,s:a/d.width,v:1-x/d.height,a:1};R=[k.s,k.v],t(W(k)),w("input")}function ee(r){E=!0,d=r.currentTarget.getBoundingClientRect(),q(r.clientX,r.clientY)}function te(r){E&&q(r.clientX,r.clientY),C&&Y(r.clientX)}function re(){E=!1,C=!1}async function I(r){if(E||C||(await he(),!r)||(!d&&e.get(g)&&(d=e.get(g).getBoundingClientRect()),!f&&e.get(b)&&(f=e.get(b).getBoundingClientRect()),!d||!f))return;const s=D(r).toHsv(),a=s.s*d.width,x=(1-s.v)*d.height;e.set(y,[a,x]),R=[s.s,s.v],e.set($,s.h),e.set(X,s.h/360*f.width)}function se(){new EyeDropper().open().then(s=>{t(s.sRGBHex)}),w("input")}const ne=[["Hex","hex"],["RGB","rgb"],["HSL","hsl"]];me(async()=>{e.set(h,window!==void 0&&!!window.EyeDropper)});function le(){p(!1)}function ae(){w("selected",e.get(i)),w("close")}e.legacy_pre_effect(()=>(e.deep_read_state(t()),e.deep_read_state(_())),()=>{e.set(i,$e(t(),_()))}),e.legacy_pre_effect(()=>e.get(i),()=>{e.get(i)&&w("selected",e.get(i))}),e.legacy_pre_effect(()=>e.deep_read_state(t()),()=>{I(t())}),e.legacy_pre_effect_reset();var oe={get value(){return t()},set value(r){t(r),e.flush()},get label(){return v()},set label(r){v(r),e.flush()},get info(){return u()},set info(r){u(r),e.flush()},get disabled(){return c()},set disabled(r){c(r),e.flush()},get show_label(){return m()},set show_label(r){m(r),e.flush()},get current_mode(){return _()},set current_mode(r){_(r),e.flush()},get dialog_open(){return p()},set dialog_open(r){p(r),e.flush()}};e.init();var j=Ee();e.event("mousemove",e.window,te),e.event("mouseup",e.window,re);var z=e.first_child(j);be(z,{get show_label(){return m()},get info(){return u()},children:(r,s)=>{e.next();var a=e.text();e.template_effect(()=>e.set_text(a,v())),e.append(r,a)},$$slots:{default:!0}});var H=e.sibling(z,2);let A;var ie=e.sibling(H,2);{var ue=r=>{var s=Me(),a=e.child(s),x=e.child(a);let k;e.reset(a),e.bind_this(a,l=>e.set(g,l),()=>e.get(g));var B=e.sibling(a,2),ce=e.child(B);let F;e.reset(B),e.bind_this(B,l=>e.set(b,l),()=>e.get(b));var J=e.sibling(B,2),G=e.child(J);let K;var N=e.sibling(G,2),P=e.child(N),S=e.child(P);e.remove_input_defaults(S);var T=e.sibling(S,2),de=e.child(T);{var _e=l=>{we(l)};e.if(de,l=>{e.get(h)&&l(_e)})}e.reset(T),e.reset(P);var O=e.sibling(P,2);e.each(O,5,()=>ne,e.index,(l,L,He,Se)=>{var Q=e.derived(()=>e.to_array(e.get(L),2));let pe=()=>e.get(Q)[0],U=()=>e.get(Q)[1];var M=Be();let V;var ve=e.child(M,!0);e.reset(M),e.template_effect(()=>{V=e.set_class(M,1,"button svelte-nbn1m9",null,V,{active:_()===U()}),e.set_text(ve,pe())}),e.event("click",M,()=>_(U())),e.append(l,M)}),e.reset(O),e.reset(N),e.reset(J),e.reset(s),e.effect(()=>e.event("focus",s,function(l){e.bubble_event.call(this,n,l)})),e.effect(()=>e.event("blur",s,function(l){e.bubble_event.call(this,n,l)})),e.action(s,(l,L)=>ke?.(l,L),()=>le),e.template_effect(()=>{e.set_style(a,`--hue:${e.get($)??""}`),k=e.set_style(x,"",k,{transform:`translate(${e.get(y),e.untrack(()=>e.get(y)[0])??""}px,${e.get(y),e.untrack(()=>e.get(y)[1])??""}px)`,background:t()}),F=e.set_style(ce,"",F,{background:"hsl("+e.get($)+", 100%, 50%)",transform:`translateX(${e.get(X)??""}px)`}),K=e.set_style(G,"",K,{background:t()})}),e.event("mousedown",a,ee),e.event("mousedown",B,Z),e.event("click",G,ae),e.bind_value(S,()=>e.get(i),l=>e.set(i,l)),e.event("change",S,l=>{t(l.currentTarget.value)}),e.event("click",T,se),e.append(r,s)};e.if(ie,r=>{p()&&r(ue)})}return e.template_effect(()=>{H.disabled=c(),A=e.set_style(H,"",A,{background:t()})}),e.event("click",H,()=>{I(t()),p(!p())}),e.append(o,j),e.pop(oe)}var Ce=e.from_html("<!> <!>",1);function rt(o,n){e.push(n,!0);let i=e.rest_props(n,["$$slots","$$events","$$legacy"]);const t=new ge(i,{value:"#000000"});let v=e.state(e.proxy(t.props.value)),u=e.derived(()=>t.shared.label||t.i18n("color_picker.color_picker"));e.user_effect(()=>{e.get(v)!==t.props.value&&(e.set(v,t.props.value,!0),t.dispatch("change"))}),ye(o,{get visible(){return t.shared.visible},get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},children:(c,m)=>{var _=Ce(),p=e.first_child(_);xe(p,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var h=e.sibling(p,2);{let g=e.derived(()=>!t.shared.interactive);Re(h,{get label(){return e.get(u)},get info(){return t.props.info},get show_label(){return t.shared.show_label},get disabled(){return e.get(g)},get value(){return t.props.value},set value(b){t.props.value=b},$$events:{input:()=>t.dispatch("input"),submit:()=>t.dispatch("submit"),blur:()=>t.dispatch("blur"),focus:()=>t.dispatch("focus")}})}e.append(c,_)},$$slots:{default:!0}}),e.pop()}export{Re as BaseColorPicker,lt as BaseExample,rt as default};
