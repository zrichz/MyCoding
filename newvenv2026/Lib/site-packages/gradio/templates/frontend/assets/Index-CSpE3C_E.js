import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import"./i18n-CyvX8KmK.js";import{G as Y}from"./utils.svelte-Ceck75cM.js";import{B as $,b as ee,F as te,c as re}from"./IconButtonWrapper-D4LMIc_2.js";import"./svelte/svelte_internal_flags_legacy.js";import{createEventDispatcher as D}from"./svelte/svelte_svelte.js";import{S as le}from"./StreamingBar-C6ky6DsM.js";import"./svelte/svelte_store.js";import"./index-Dw8Uzof1.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-C7jLnxqj.js";import"./prism-python-B1e-54E9.js";var se=e.from_svg('<svg width="100%" height="100%" viewBox="0 0 14 17" version="1.1" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,-10.6667,-7.73588)"><path d="M12.7,24.033C12.256,24.322 11.806,24.339 11.351,24.084C10.896,23.829 10.668,23.434 10.667,22.9L10.667,9.1C10.667,8.567 10.895,8.172 11.351,7.916C11.807,7.66 12.256,7.677 12.7,7.967L23.567,14.867C23.967,15.133 24.167,15.511 24.167,16C24.167,16.489 23.967,16.867 23.567,17.133L12.7,24.033Z" style="fill:currentColor;fill-rule:nonzero;"></path></g></svg>');function ae(C){var l=se();e.append(C,l)}var ie=e.from_html('<input type="checkbox"/>');function ne(C,l){e.push(l,!1);let i=e.prop(l,"value",12),t=e.prop(l,"disabled",12);const n=D();var u={get value(){return i()},set value(f){i(f),e.flush()},get disabled(){return t()},set disabled(f){t(f),e.flush()}};e.init();var p=ie();e.remove_input_defaults(p);let o;return e.template_effect(()=>{p.disabled=t(),o=e.set_class(p,1,"svelte-3g0mcl",null,o,{disabled:t()&&!i()})}),e.bind_checked(p,i),e.event("input",p,()=>n("change",!i())),e.append(C,p),e.pop(u)}const oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23888888'%20d='M6%202c-1.1%200-1.99.9-1.99%202L4%2020c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6H6zm7%207V3.5L18.5%209H13z'/%3e%3c/svg%3e",ce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%2032%2032'%20version='1.1'%20id='svg7'%20sodipodi:docname='light-folder-new.svg'%20inkscape:version='1.3.2%20(091e20e,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview7'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='7.375'%20inkscape:cx='15.932203'%20inkscape:cy='16'%20inkscape:window-width='1312'%20inkscape:window-height='529'%20inkscape:window-x='0'%20inkscape:window-y='38'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg7'%20/%3e%3cdefs%20id='defs6'%3e%3cclipPath%20id='clipPath1'%3e%3cpath%20d='m69.63%2012.145h-.052c-22.727-.292-46.47%204.077-46.709%204.122-2.424.451-4.946%202.974-5.397%205.397-.044.237-4.414%2023.983-4.122%2046.71-.292%2022.777%204.078%2046.523%204.122%2046.761.451%202.423%202.974%204.945%205.398%205.398.237.044%2023.982%204.413%2046.709%204.121%2022.779.292%2046.524-4.077%2046.761-4.121%202.423-.452%204.946-2.976%205.398-5.399.044-.236%204.413-23.981%204.121-46.709.292-22.777-4.077-46.523-4.121-46.761-.453-2.423-2.976-4.946-5.398-5.397-.238-.045-23.984-4.414-46.71-4.122'%20id='path1'%20/%3e%3c/clipPath%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='352.98'%20x2='-601.15'%20y1='663.95'%20x1='-591.02'%20id='2'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop1'%20/%3e%3cstop%20offset='1'%20stop-color='%23aaa'%20id='stop2'%20/%3e%3c/linearGradient%3e%3clinearGradient%20gradientUnits='userSpaceOnUse'%20y2='354.29'%20x2='-704.05'%20y1='647.77'%20x1='-701.19'%20id='1'%3e%3cstop%20stop-color='%23acabab'%20id='stop3'%20/%3e%3cstop%20offset='1'%20stop-color='%23d4d4d4'%20id='stop4'%20/%3e%3c/linearGradient%3e%3clinearGradient%20id='0'%20x1='59.12'%20y1='-19.888'%20x2='59.15'%20y2='-37.783'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(4.17478%200%200%204.16765-1069.7%20447.73)'%3e%3cstop%20stop-color='%23a0a0a0'%20id='stop5'%20/%3e%3cstop%20offset='1'%20stop-color='%23bdbdbd'%20id='stop6'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3cg%20transform='matrix(.07089%200%200%20.07017%2023.295-40.67)'%20fill='%2360aae5'%20id='g7'%20style='fill:%23888888;fill-opacity:1'%3e%3cpath%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20d='m-884.1%20294.78c-4.626%200-8.349%203.718-8.349%208.335v161.41l468.19%201v-121.2c0-4.618-3.724-8.335-8.35-8.335h-272.65c-8.51.751-9.607-.377-13.812-5.981-5.964-7.968-14.969-21.443-20.84-29.21-4.712-6.805-5.477-6.02-13.292-6.02z'%20fill='url(%230)'%20color='%23000'%20id='path6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20y='356.85'%20x='-890.28'%20height='295.13'%20width='463.85'%20fill='url(%231)'%20stroke='url(%231)'%20stroke-width='2.378'%20rx='9.63'%20id='rect6'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3crect%20width='463.85'%20height='295.13'%20x='-890.28'%20y='356.85'%20transform='matrix(.7872%200%200%20.79524%20415.34%20430.11)'%20fill='none'%20stroke='url(%232)'%20stroke-linejoin='round'%20stroke-linecap='round'%20stroke-width='5.376'%20rx='9.63'%20id='rect7'%20style='fill:%23888888;fill-opacity:1'%20/%3e%3c/g%3e%3c/svg%3e";var de=e.from_html('<span class="no-checkbox svelte-6im0c4" aria-hidden="true"></span>'),pe=e.from_html('<span role="button" aria-label="expand directory" tabindex="0"><!></span>'),fe=e.from_html('<span class="file-icon svelte-6im0c4"><img alt="file icon" class="svelte-6im0c4"/></span>'),ue=e.from_html('<li class="svelte-6im0c4"><span><!> <!> <span class="item-name svelte-6im0c4"> </span></span> <!></li>'),_e=e.from_html("<ul></ul>");function A(C,l){e.push(l,!1);let i=e.prop(l,"path",28,()=>[]),t=e.prop(l,"index_path",28,()=>[]),n=e.prop(l,"selected_files",28,()=>[]),u=e.prop(l,"selected_folders",28,()=>[]),p=e.prop(l,"is_selected_entirely",12,!1),o=e.prop(l,"interactive",12),f=e.prop(l,"selectable",12,!1),w=e.prop(l,"ls_fn",12),x=e.prop(l,"file_count",12,"multiple"),y=e.prop(l,"valid_for_selection",12),b=e.mutable_source([]),d=e.mutable_source([]);const z=r=>{e.get(d).includes(r)?e.set(d,e.get(d).filter(G=>G!==r)):e.set(d,[...e.get(d),r])},s=r=>{e.get(d).includes(r)||e.set(d,[...e.get(d),r])};(async()=>(e.set(b,await w()(i())),y()&&e.set(b,[{name:".",type:"file"},...e.get(b)]),e.set(d,e.get(b).map((r,G)=>r.type==="folder"&&(p()||n().some(m=>m[0]===r.name))?G:null).filter(r=>r!==null))))();const a=D();function U(r,G,m){a("select",{index:r,value:G.join("/"),selected:!0})}e.legacy_pre_effect(()=>(e.deep_read_state(p()),e.get(b),e.deep_read_state(i())),()=>{p()&&e.get(b).forEach(r=>{a("check",{path:[...i(),r.name],checked:!0,type:r.type})})}),e.legacy_pre_effect_reset();var L={get path(){return i()},set path(r){i(r),e.flush()},get index_path(){return t()},set index_path(r){t(r),e.flush()},get selected_files(){return n()},set selected_files(r){n(r),e.flush()},get selected_folders(){return u()},set selected_folders(r){u(r),e.flush()},get is_selected_entirely(){return p()},set is_selected_entirely(r){p(r),e.flush()},get interactive(){return o()},set interactive(r){o(r),e.flush()},get selectable(){return f()},set selectable(r){f(r),e.flush()},get ls_fn(){return w()},set ls_fn(r){w(r),e.flush()},get file_count(){return x()},set file_count(r){x(r),e.flush()},get valid_for_selection(){return y()},set valid_for_selection(r){y(r),e.flush()}};e.init();var v=_e();let T;return e.each(v,5,()=>e.get(b),e.index,(r,G,m)=>{let k=()=>e.get(G).type,_=()=>e.get(G).name,Z=()=>e.get(G).valid;const H=e.derived_safe_equal(()=>(k(),e.deep_read_state(n()),e.deep_read_state(u()),_(),e.untrack(()=>(k()==="file"?n():u()).some(c=>c[0]===_()&&c.length===1))));var S=ue(),j=e.child(S);let O;var M=e.child(j);{var J=c=>{var g=e.comment(),q=e.first_child(g);{var E=F=>{var I=de();e.append(F,I)},B=F=>{ne(F,{disabled:!1,get value(){return e.get(H)},$$events:{change:I=>{let P=I.detail;a("check",{path:[...i(),_()],checked:P,type:k()}),f()&&U([...t(),m],[...i(),_()],k()),k()==="folder"&&P&&s(m)}}})};e.if(q,F=>{k()==="folder"&&x()==="single"?F(E):F(B,!1)})}e.append(c,g)};e.if(M,c=>{o()&&c(J)})}var V=e.sibling(M,2);{var K=c=>{var g=pe();let q;var E=e.child(g);ae(E),e.reset(g),e.template_effect(B=>q=e.set_class(g,1,"icon svelte-6im0c4",null,q,B),[()=>({hidden:!e.get(d).includes(m)})]),e.event("click",g,e.stopPropagation(()=>z(m))),e.event("keydown",g,({key:B})=>{(B===" "||B==="Enter")&&z(m)}),e.append(c,g)},N=c=>{var g=fe(),q=e.child(g);e.reset(g),e.template_effect(()=>e.set_attribute(q,"src",_()==="."?ce:oe)),e.append(c,g)};e.if(V,c=>{k()==="folder"?c(K):c(N,!1)})}var W=e.sibling(V,2),Q=e.child(W,!0);e.reset(W),e.reset(j);var R=e.sibling(j,2);{var X=c=>{var g=e.comment(),q=e.first_child(g);{let E=e.derived_safe_equal(()=>(e.deep_read_state(i()),_(),e.untrack(()=>[...i(),_()]))),B=e.derived_safe_equal(()=>(e.deep_read_state(t()),e.untrack(()=>[...t(),m]))),F=e.derived_safe_equal(()=>(e.deep_read_state(n()),_(),e.untrack(()=>n().filter(h=>h[0]===_()).map(h=>h.slice(1))))),I=e.derived_safe_equal(()=>(e.deep_read_state(u()),_(),e.untrack(()=>u().filter(h=>h[0]===_()).map(h=>h.slice(1))))),P=e.derived_safe_equal(()=>(e.deep_read_state(u()),_(),e.untrack(()=>u().some(h=>h[0]===_()&&h.length===1))));A(q,{get path(){return e.get(E)},get index_path(){return e.get(B)},get selected_files(){return e.get(F)},get selected_folders(){return e.get(I)},get is_selected_entirely(){return e.get(P)},get interactive(){return o()},get selectable(){return f()},get ls_fn(){return w()},get file_count(){return x()},get valid_for_selection(){return Z()},$$events:{check(h){e.bubble_event.call(this,l,h)},select(h){e.bubble_event.call(this,l,h)}}})}e.append(c,g)};e.if(R,c=>{k(),e.get(d),e.untrack(()=>k()==="folder"&&e.get(d).includes(m))&&c(X)})}e.reset(S),e.template_effect(()=>{O=e.set_class(j,1,"wrap svelte-6im0c4",null,O,{selected:!o()&&e.get(H),selectable:f()}),e.set_attribute(j,"role",f()?"button":void 0),e.set_attribute(j,"tabindex",f()?0:void 0),e.set_text(Q,_())}),e.event("click",j,e.stopPropagation(()=>{f()&&U([...t(),m],[...i(),_()],k())})),e.event("keydown",j,({key:c})=>{f()&&(c===" "||c==="Enter")&&U([...t(),m],[...i(),_()],k())}),e.append(r,S)}),e.reset(v),e.template_effect(()=>T=e.set_class(v,1,"svelte-6im0c4",null,T,{"no-checkboxes":!o(),root:i().length===0})),e.append(C,v),e.pop(L)}var ge=e.from_html('<div class="file-wrap svelte-1gs1iku"><!></div>');function he(C,l){e.push(l,!1);let i=e.prop(l,"interactive",12),t=e.prop(l,"file_count",12,"multiple"),n=e.prop(l,"value",28,()=>[]),u=e.prop(l,"selectable",12,!1),p=e.prop(l,"ls_fn",12),o=e.mutable_source([]);const f=D(),w=(s,a)=>s.join("/")===a.join("/"),x=(s,a)=>a.some(U=>w(U,s)),y=(s,a)=>s.join("/").startsWith(a.join("/"));var b={get interactive(){return i()},set interactive(s){i(s),e.flush()},get file_count(){return t()},set file_count(s){t(s),e.flush()},get value(){return n()},set value(s){n(s),e.flush()},get selectable(){return u()},set selectable(s){u(s),e.flush()},get ls_fn(){return p()},set ls_fn(s){p(s),e.flush()}};e.init();var d=ge(),z=e.child(d);return A(z,{path:[],get selected_files(){return n()},get selected_folders(){return e.get(o)},get interactive(){return i()},get selectable(){return u()},get ls_fn(){return p()},get file_count(){return t()},valid_for_selection:!1,$$events:{check:s=>{const{path:a,checked:U,type:L}=s.detail;U?t()==="single"?n([a]):L==="folder"?x(a,e.get(o))||e.set(o,[...e.get(o),a]):x(a,n())||n([...n(),a]):(e.set(o,e.get(o).filter(v=>!y(a,v))),L==="folder"?(e.set(o,e.get(o).filter(v=>!y(v,a))),n(n().filter(v=>!y(v,a)))):n(n().filter(v=>!w(v,a)))),f("input")},select:s=>f("select",s.detail)}}),e.reset(d),e.append(C,d),e.pop(b)}var ve=e.from_html("<!> <!> <!> <!>",1);function Me(C,l){e.push(l,!0);const i=e.rest_props(l,["$$slots","$$events","$$legacy"]),t=new Y(i);let n=e.state(e.proxy(t.props.value)),u=e.derived(()=>[t.props.root_dir,t.props.glob,t.props.ignore_glob]);e.user_effect(()=>{e.get(n)!=t.props.value&&(e.set(n,t.props.value,!0),t.dispatch("change"))});{let p=e.derived(()=>t.props.value===null?"dashed":"solid");$(C,{get visible(){return t.shared.visible},get variant(){return e.get(p)},border_mode:"base",padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!0,overflow_behavior:"auto",get height(){return t.props.height},get max_height(){return t.props.max_height},get min_height(){return t.props.min_height},children:(o,f)=>{var w=ve(),x=e.first_child(w);le(x,e.spread_props(()=>t.shared.loading_status,{get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n},on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var y=e.sibling(x,2);{var b=s=>{re(s,{get buttons(){return t.props.buttons},on_custom_button_click:a=>{t.dispatch("custom_button_click",{id:a})}})};e.if(y,s=>{t.shared.show_label&&t.props.buttons&&t.props.buttons.length>0&&s(b)})}var d=e.sibling(y,2);{let s=e.derived(()=>t.shared.label||"FileExplorer");ee(d,{get show_label(){return t.shared.show_label},get Icon(){return te},get label(){return e.get(s)},float:!1})}var z=e.sibling(d,2);e.key(z,()=>e.get(u),s=>{he(s,{get file_count(){return t.props.file_count},get interactive(){return t.shared.interactive},get selectable(){return t.props._selectable},get ls_fn(){return t.shared.server.ls},get value(){return t.props.value},set value(a){t.props.value=a},$$events:{input:()=>t.dispatch("input"),select:a=>t.dispatch("select",a.detail)}})}),e.append(o,w)},$$slots:{default:!0}})}e.pop()}export{Me as default};
