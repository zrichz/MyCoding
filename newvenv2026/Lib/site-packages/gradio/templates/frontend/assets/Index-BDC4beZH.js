import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import"./index-Dw8Uzof1.js";import{onMount as de,tick as F}from"./svelte/svelte_svelte.js";import{C as ce}from"./Index-qXW7OcMb.js";import{BaseMarkdown as ve}from"./Index-WIcmpLtB.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./i18n-CyvX8KmK.js";import"./utils.svelte-Ceck75cM.js";import"./StreamingBar-C6ky6DsM.js";import"./IconButtonWrapper-D4LMIc_2.js";import"./MarkdownCode-C7jLnxqj.js";import"./prism-python-B1e-54E9.js";import"./Example-C8-r9viM.js";import"./Example-BjPVIe9-.js";var pe=e.from_html('<span class="added svelte-1s2fnws"> </span>'),ue=e.from_html('<span class="removed svelte-1s2fnws"> </span>'),me=e.from_html('<span class="diff-stats svelte-1s2fnws"><!> <!></span>'),fe=e.from_html('<button class="undo-button svelte-1s2fnws" title="Undo this change">Undo</button>'),_e=e.from_html('<div><div class="message-content svelte-1s2fnws"><span class="message-text svelte-1s2fnws"><!></span> <!></div></div>'),ge=e.from_html('<div class="no-messages svelte-1s2fnws">No messages yet</div>'),he=e.from_html('<button class="starter-query-button svelte-1s2fnws"> </button>'),be=e.from_html('<div class="starter-queries-container svelte-1s2fnws"><div class="starter-queries svelte-1s2fnws"></div></div>'),we=e.from_html('<div class="message-history svelte-1s2fnws"><!> <!> <!></div>'),ye=e.from_html('<div class="code-content svelte-1s2fnws"><div class="code-editor-container svelte-1s2fnws"><!></div> <button><!></button> <button class="deploy-to-spaces-button svelte-1s2fnws"><span class="button-content svelte-1s2fnws">Deploy to <svg class="spaces-logo svelte-1s2fnws" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" preserveAspectRatio="xMidYMid meet" viewBox="0 0 39 40"><path d="M6.3712 2.04427C3.7183 2.04427 1.56771 4.19486 1.56771 6.84776V18.3546V18.6544V32.7341C1.56771 35.3868 3.71818 37.5377 6.3712 37.5377H17.878H20.7507H32.2575C34.9104 37.5377 37.0612 35.387 37.0612 32.7341V21.6204C37.0612 20.177 36.4252 18.8839 35.4189 18.004C36.4576 16.3895 37.0612 14.4666 37.0612 12.4046C37.0612 6.68274 32.4225 2.04427 26.7007 2.04427C24.6388 2.04427 22.7159 2.64776 21.1014 3.68647C20.2214 2.6802 18.9282 2.04427 17.4849 2.04427H6.3712Z" fill="black" class="stroke-white dark:stroke-white/10" stroke-width="3.07552"></path><path d="M9.56855 23.5001C8.8406 23.5001 8.25047 24.0902 8.25047 24.8182V29.5361C8.25047 30.2641 8.8406 30.8542 9.56855 30.8542H14.2864C15.0144 30.8542 15.6045 30.2641 15.6045 29.5361V24.8182C15.6045 24.0902 15.0143 23.5001 14.2864 23.5001H9.56855Z" fill="#FF3270"></path><path d="M24.3409 23.5001C23.613 23.5001 23.0228 24.0902 23.0228 24.8182V29.5361C23.0228 30.2641 23.613 30.8542 24.3409 30.8542H29.0588C29.7868 30.8542 30.3769 30.2641 30.3769 29.5361V24.8182C30.3769 24.0902 29.7868 23.5001 29.0588 23.5001H24.3409Z" fill="#861FFF"></path><path d="M9.56855 8.72815C8.8406 8.72815 8.25047 9.31827 8.25047 10.0462V14.7641C8.25047 15.4921 8.8406 16.0822 9.56855 16.0822H14.2864C15.0144 16.0822 15.6045 15.4921 15.6045 14.7641V10.0462C15.6045 9.31827 15.0143 8.72815 14.2864 8.72815H9.56855Z" fill="#097EFF"></path><path d="M26.6999 8.72815C24.6692 8.72815 23.0228 10.3744 23.0228 12.4052C23.0228 14.4359 24.6692 16.0822 26.6999 16.0822C28.7306 16.0822 30.3769 14.4359 30.3769 12.4052C30.3769 10.3744 28.7306 8.72815 26.6999 8.72815Z" fill="#FFD702"></path></svg> <span style="font-weight: 600;">Spaces</span></span></button></div>'),xe=e.from_html('<div class="vibe-editor svelte-1s2fnws"><button class="resize-handle svelte-1s2fnws" aria-label="Resize sidebar"></button> <div class="tab-header svelte-1s2fnws"><button>Chat</button> <button>Code <!></button></div> <div class="tab-content svelte-1s2fnws"><!></div> <div class="input-section svelte-1s2fnws"><div class="powered-by svelte-1s2fnws">Powered by: <code>gpt-oss</code></div> <textarea placeholder="What can I add or change?" class="prompt-input svelte-1s2fnws"></textarea> <button class="submit-button svelte-1s2fnws">Send</button></div></div>');function Ye(N,R){e.push(R,!1);let f=e.prop(R,"app",12),h=e.prop(R,"root",12),b=e.mutable_source(""),$=e.mutable_source(350),z=!1,q=e.mutable_source(),_=e.mutable_source("chat"),k=e.mutable_source(""),l=e.mutable_source(null),o=e.mutable_source([]),C=e.mutable_source();const S=(t="smooth")=>{e.get(C)&&e.get(C).scrollTo({top:e.get(C).scrollHeight,behavior:t})};let H=e.mutable_source([]);(async()=>{f().post_data(`${h()}/gradio_api/vibe-starter-queries/`,{}).then(async([a,n])=>{if(n!==200)throw new Error(`Error: ${n}`);const d=a;e.set(H,d.starter_queries)}).catch(async a=>{console.error("Failed to fetch starter queries:",a)})})();const L=async t=>{const a=t||e.get(b);if(a.trim()==="")return;e.set(l,null);const n=e.get(o).length;e.set(o,[...e.get(o),{text:a,isBot:!1}]);const d=e.get(o).length;e.set(o,[...e.get(o),{text:"Working...",isBot:!0,isPending:!0}]),await F(),S();const u=a;t||e.set(b,""),f().post_data(`${h()}/gradio_api/vibe-edit/`,{prompt:u}).then(async([i,r])=>{if(r!==200)throw new Error(`Error: ${r}`);const s=i;e.set(l,s.diff_stats),e.set(o,e.get(o).map((c,v)=>v===n?{...c,hash:s.hash}:c)),e.set(o,e.get(o).map((c,v)=>v===d?{text:s.reasoning?s.reasoning:"Done.",isBot:!0,isPending:!1}:c)),await F(),S()}).catch(async i=>{e.set(o,e.get(o).map((r,s)=>s===d?{text:"Error occurred.",isBot:!0,isPending:!1}:r)),await F(),S()})},X=async t=>{await L(t)},Y=async(t,a)=>{try{await f().post_data(`${h()}/gradio_api/undo-vibe-edit/`,{hash:t}),e.set(l,null);const n=e.get(o)[a];e.set(b,n.text),e.set(o,e.get(o).slice(0,a))}catch(n){console.error("Failed to undo:",n)}},J=t=>{t.preventDefault(),z=!0,document.addEventListener("mousemove",W),document.addEventListener("mouseup",D),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},W=t=>{if(!z)return;const a=250,n=Math.min(800,window.innerWidth*.5),d=window.innerWidth-t.clientX;e.set($,Math.max(a,Math.min(n,d))),window.dispatchEvent(new CustomEvent("vibeEditorResize",{detail:{width:e.get($)}}))},D=()=>{z=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",D),document.body.style.cursor="",document.body.style.userSelect=""},O=async()=>{try{const t=await fetch(`${h()}/gradio_api/vibe-code/`,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){const a=await t.json();e.set(k,a.code)}}catch(t){console.error("Failed to fetch code:",t)}};let x=e.mutable_source(!1);const ee=async()=>{try{await f().post_data(`${h()}/gradio_api/vibe-code/`,{code:e.get(k)}),e.set(x,!0),setTimeout(()=>{e.set(x,!1)},1e3)}catch(t){console.error("Failed to update code:",t)}};function te(){const t="https://huggingface.co/new-space",a=new URLSearchParams({name:"new-space",sdk:"gradio"}),n=e.get(k).trimStart();a.append("files[0][path]","app.py"),a.append("files[0][content]",n),window.open(`${t}?${a.toString()}`,"_blank")?.focus()}de(()=>()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",D)}),e.legacy_pre_effect(()=>e.deep_read_state(f()),()=>{f(),O()}),e.legacy_pre_effect(()=>(e.get(_),F),()=>{e.get(_)==="chat"&&F().then(()=>S("auto"))}),e.legacy_pre_effect(()=>e.get(x),()=>{e.get(x)}),e.legacy_pre_effect(()=>e.get(H),()=>{e.get(H)}),e.legacy_pre_effect_reset();var se={get app(){return f()},set app(t){f(t),e.flush()},get root(){return h()},set root(t){h(t),e.flush()}};e.init();var E=xe(),Q=e.child(E),P=e.sibling(Q,2),U=e.child(P);let I;var V=e.sibling(U,2);let j;var ae=e.sibling(e.child(V));{var re=t=>{var a=me(),n=e.child(a);{var d=i=>{var r=pe(),s=e.child(r);e.reset(r),e.template_effect(()=>e.set_text(s,`+${e.get(l),e.untrack(()=>e.get(l).lines_added)??""}`)),e.append(i,r)};e.if(n,i=>{e.get(l),e.untrack(()=>e.get(l).lines_added>0)&&i(d)})}var u=e.sibling(n,2);{var g=i=>{var r=ue(),s=e.child(r);e.reset(r),e.template_effect(()=>e.set_text(s,`-${e.get(l),e.untrack(()=>e.get(l).lines_removed)??""}`)),e.append(i,r)};e.if(u,i=>{e.get(l),e.untrack(()=>e.get(l).lines_removed>0)&&i(g)})}e.reset(a),e.append(t,a)};e.if(ae,t=>{e.get(l),e.untrack(()=>e.get(l)&&(e.get(l).lines_added>0||e.get(l).lines_removed>0))&&t(re)})}e.reset(V),e.reset(P);var T=e.sibling(P,2),oe=e.child(T);{var ne=t=>{var a=we(),n=e.child(a);e.each(n,1,()=>e.get(o),e.index,(r,s,c)=>{var v=_e();let w;var m=e.child(v),y=e.child(m),p=e.child(y);ve(p,{get value(){return e.get(s),e.untrack(()=>e.get(s).text)},latex_delimiters:[],theme_mode:"system"}),e.reset(y);var M=e.sibling(y,2);{var le=Z=>{var K=fe();e.event("click",K,()=>Y(e.get(s).hash||"",c)),e.append(Z,K)};e.if(M,Z=>{e.get(s),e.untrack(()=>!e.get(s).isBot&&e.get(s).hash&&!e.get(s).isPending)&&Z(le)})}e.reset(m),e.reset(v),e.template_effect(()=>w=e.set_class(v,1,"message-item svelte-1s2fnws",null,w,{"bot-message":e.get(s).isBot,"user-message":!e.get(s).isBot})),e.append(r,v)});var d=e.sibling(n,2);{var u=r=>{var s=ge();e.append(r,s)};e.if(d,r=>{e.get(o),e.untrack(()=>e.get(o).length===0)&&r(u)})}var g=e.sibling(d,2);{var i=r=>{var s=be(),c=e.child(s);e.each(c,5,()=>e.get(H),e.index,(v,w)=>{var m=he(),y=e.child(m,!0);e.reset(m),e.template_effect(()=>e.set_text(y,e.get(w))),e.event("click",m,()=>X(e.get(w))),e.append(v,m)}),e.reset(c),e.reset(s),e.append(r,s)};e.if(g,r=>{e.get(o),e.untrack(()=>e.get(o).length===0)&&r(i)})}e.reset(a),e.bind_this(a,r=>e.set(C,r),()=>e.get(C)),e.append(t,a)},ie=t=>{var a=e.comment(),n=e.first_child(a);{var d=u=>{var g=ye(),i=e.child(g),r=e.child(i);ce(r,{language:"python",lines:10,dark_mode:!1,basic:!0,readonly:!1,placeholder:"Enter your code here...",wrap_lines:!0,get value(){return e.get(k)},set value(p){e.set(k,p)},$$legacy:!0}),e.reset(i);var s=e.sibling(i,2);let c;var v=e.child(s);{var w=p=>{var M=e.text("Updated!");e.append(p,M)},m=p=>{var M=e.text("Update Code");e.append(p,M)};e.if(v,p=>{e.get(x)?p(w):p(m,!1)})}e.reset(s);var y=e.sibling(s,2);e.reset(g),e.template_effect(()=>c=e.set_class(s,1,"update-code-button svelte-1s2fnws",null,c,{updating:e.get(x)})),e.event("click",s,ee),e.event("click",y,()=>te()),e.append(u,g)};e.if(n,u=>{e.get(_)==="code"&&u(d)},!0)}e.append(t,a)};e.if(oe,t=>{e.get(_)==="chat"?t(ne):t(ie,!1)})}e.reset(T);var A=e.sibling(T,2),B=e.sibling(e.child(A),2);e.remove_textarea_child(B);var G=e.sibling(B,2);return e.reset(A),e.reset(E),e.bind_this(E,t=>e.set(q,t),()=>e.get(q)),e.template_effect(t=>{e.set_style(E,`width: ${e.get($)??""}px;`),I=e.set_class(U,1,"tab-button svelte-1s2fnws",null,I,{active:e.get(_)==="chat"}),j=e.set_class(V,1,"tab-button svelte-1s2fnws",null,j,{active:e.get(_)==="code"}),G.disabled=t},[()=>(e.get(b),e.untrack(()=>e.get(b).trim()===""))]),e.event("mousedown",Q,J),e.event("click",U,()=>e.set(_,"chat")),e.event("click",V,()=>e.set(_,"code")),e.event("keydown",B,t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),L())}),e.bind_value(B,()=>e.get(b),t=>e.set(b,t)),e.event("click",G,()=>L()),e.append(N,E),e.pop(se)}export{Ye as default};
