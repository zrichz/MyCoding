import{be as d,M as l,V as _,aP as L,a as P,aw as j,_ as p,s as f,al as C,R as N,Q as b,ap as y,bh as R,aR as M}from"./index-Dtj0WP_z.js";j.AddNodeConstructor("Light_Type_2",(e,t)=>()=>new a(e,_.Zero(),_.Zero(),0,0,t));class a extends d{get iesProfileTexture(){return this._iesProfileTexture}set iesProfileTexture(t){this._iesProfileTexture!==t&&(this._iesProfileTexture=t,this._iesProfileTexture&&a._IsTexture(this._iesProfileTexture)&&this._iesProfileTexture.onLoadObservable.addOnce(()=>{this._markMeshesAsLightDirty()}))}get angle(){return this._angle}set angle(t){this._angle=t,this._cosHalfAngle=Math.cos(t*.5),this._projectionTextureProjectionLightDirty=!0,this.forceProjectionMatrixCompute(),this._computeAngleValues()}get innerAngle(){return this._innerAngle}set innerAngle(t){this._innerAngle=t,this._computeAngleValues()}get shadowAngleScale(){return this._shadowAngleScale}set shadowAngleScale(t){this._shadowAngleScale=t,this.forceProjectionMatrixCompute()}get projectionTextureMatrix(){return this._projectionTextureMatrix}get projectionTextureLightNear(){return this._projectionTextureLightNear}set projectionTextureLightNear(t){this._projectionTextureLightNear=t,this._projectionTextureProjectionLightDirty=!0}get projectionTextureLightFar(){return this._projectionTextureLightFar}set projectionTextureLightFar(t){this._projectionTextureLightFar=t,this._projectionTextureProjectionLightDirty=!0}get projectionTextureUpDirection(){return this._projectionTextureUpDirection}set projectionTextureUpDirection(t){this._projectionTextureUpDirection=t,this._projectionTextureProjectionLightDirty=!0}get projectionTexture(){return this._projectionTexture}set projectionTexture(t){this._projectionTexture!==t&&(this._projectionTexture=t,this._projectionTextureDirty=!0,this._projectionTexture&&!this._projectionTexture.isReady()&&(a._IsProceduralTexture(this._projectionTexture)?this._projectionTexture.getEffect().executeWhenCompiled(()=>{this._markMeshesAsLightDirty()}):a._IsTexture(this._projectionTexture)&&this._projectionTexture.onLoadObservable.addOnce(()=>{this._markMeshesAsLightDirty()})))}static _IsProceduralTexture(t){return t.onGeneratedObservable!==void 0}static _IsTexture(t){return t.onLoadObservable!==void 0}get projectionTextureProjectionLightMatrix(){return this._projectionTextureProjectionLightMatrix}set projectionTextureProjectionLightMatrix(t){this._projectionTextureProjectionLightMatrix=t,this._projectionTextureProjectionLightDirty=!1,this._projectionTextureDirty=!0}constructor(t,r,i,n,s,u){super(t,u),this._innerAngle=0,this._iesProfileTexture=null,this._projectionTextureMatrix=l.Zero(),this._projectionTextureLightNear=1e-6,this._projectionTextureLightFar=1e3,this._projectionTextureUpDirection=_.Up(),this._projectionTextureViewLightDirty=!0,this._projectionTextureProjectionLightDirty=!0,this._projectionTextureDirty=!0,this._projectionTextureViewTargetVector=_.Zero(),this._projectionTextureViewLightMatrix=l.Zero(),this._projectionTextureProjectionLightMatrix=l.Zero(),this._projectionTextureScalingMatrix=l.FromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1),this.position=r,this.direction=i,this.angle=n,this.exponent=s}getClassName(){return"SpotLight"}getTypeID(){return L.LIGHTTYPEID_SPOTLIGHT}_setDirection(t){super._setDirection(t),this._projectionTextureViewLightDirty=!0}_setPosition(t){super._setPosition(t),this._projectionTextureViewLightDirty=!0}_setDefaultShadowProjectionMatrix(t,r,i){const n=this.getScene().activeCamera;if(!n)return;this._shadowAngleScale=this._shadowAngleScale||1;const s=this._shadowAngleScale*this._angle,u=this.shadowMinZ!==void 0?this.shadowMinZ:n.minZ,m=this.shadowMaxZ!==void 0?this.shadowMaxZ:n.maxZ,c=this.getScene().getEngine().useReverseDepthBuffer;l.PerspectiveFovLHToRef(s,1,c?m:u,c?u:m,t,!0,this._scene.getEngine().isNDCHalfZRange,void 0,c)}_computeProjectionTextureViewLightMatrix(){this._projectionTextureViewLightDirty=!1,this._projectionTextureDirty=!0,this.getAbsolutePosition().addToRef(this.getShadowDirection(),this._projectionTextureViewTargetVector),l.LookAtLHToRef(this.getAbsolutePosition(),this._projectionTextureViewTargetVector,this._projectionTextureUpDirection,this._projectionTextureViewLightMatrix)}_computeProjectionTextureProjectionLightMatrix(){this._projectionTextureProjectionLightDirty=!1,this._projectionTextureDirty=!0;const t=this.projectionTextureLightFar,r=this.projectionTextureLightNear,i=t/(t-r),n=-i*r,s=1/Math.tan(this._angle/2);l.FromValuesToRef(s/1,0,0,0,0,s,0,0,0,0,i,1,0,0,n,0,this._projectionTextureProjectionLightMatrix)}_computeProjectionTextureMatrix(){if(this._projectionTextureDirty=!1,this._projectionTextureViewLightMatrix.multiplyToRef(this._projectionTextureProjectionLightMatrix,this._projectionTextureMatrix),this._projectionTexture instanceof P){const t=this._projectionTexture.uScale/2,r=this._projectionTexture.vScale/2;l.FromValuesToRef(t,0,0,0,0,r,0,0,0,0,.5,0,.5,.5,.5,1,this._projectionTextureScalingMatrix)}this._projectionTextureMatrix.multiplyToRef(this._projectionTextureScalingMatrix,this._projectionTextureMatrix)}_buildUniformLayout(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",4),this._uniformBuffer.addUniform("vLightDirection",3),this._uniformBuffer.addUniform("vLightFalloff",4),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()}_computeAngleValues(){this._lightAngleScale=1/Math.max(.001,Math.cos(this._innerAngle*.5)-this._cosHalfAngle),this._lightAngleOffset=-this._cosHalfAngle*this._lightAngleScale}transferTexturesToEffect(t,r){return this.projectionTexture&&this.projectionTexture.isReady()&&(this._projectionTextureViewLightDirty&&this._computeProjectionTextureViewLightMatrix(),this._projectionTextureProjectionLightDirty&&this._computeProjectionTextureProjectionLightMatrix(),this._projectionTextureDirty&&this._computeProjectionTextureMatrix(),t.setMatrix("textureProjectionMatrix"+r,this._projectionTextureMatrix),t.setTexture("projectionLightTexture"+r,this.projectionTexture)),this._iesProfileTexture&&this._iesProfileTexture.isReady()&&t.setTexture("iesLightTexture"+r,this._iesProfileTexture),this}transferToEffect(t,r){let i;const n=this._scene.floatingOriginOffset;return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x-n.x,this.transformedPosition.y-n.y,this.transformedPosition.z-n.z,this.exponent,r),i=_.Normalize(this.transformedDirection)):(this._uniformBuffer.updateFloat4("vLightData",this.position.x-n.x,this.position.y-n.y,this.position.z-n.z,this.exponent,r),i=_.Normalize(this.direction)),this._uniformBuffer.updateFloat4("vLightDirection",i.x,i.y,i.z,this._cosHalfAngle,r),this._uniformBuffer.updateFloat4("vLightFalloff",this.range,this._inverseSquaredRange,this._lightAngleScale,this._lightAngleOffset,r),this}transferToNodeMaterialEffect(t,r){let i;return this.computeTransformedInformation()?i=_.Normalize(this.transformedDirection):i=_.Normalize(this.direction),this.getScene().useRightHandedSystem?t.setFloat3(r,-i.x,-i.y,-i.z):t.setFloat3(r,i.x,i.y,i.z),this}dispose(){super.dispose(),this._projectionTexture&&this._projectionTexture.dispose(),this._iesProfileTexture&&(this._iesProfileTexture.dispose(),this._iesProfileTexture=null)}getDepthMinZ(t){const r=this._scene.getEngine(),i=this.shadowMinZ!==void 0?this.shadowMinZ:t?.minZ??0;return r.useReverseDepthBuffer&&r.isNDCHalfZRange?i:this._scene.getEngine().isNDCHalfZRange?0:i}getDepthMaxZ(t){const r=this._scene.getEngine(),i=this.shadowMaxZ!==void 0?this.shadowMaxZ:t?.maxZ??1e4;return r.useReverseDepthBuffer&&r.isNDCHalfZRange?0:i}prepareLightSpecificDefines(t,r){t["SPOTLIGHT"+r]=!0,t["PROJECTEDLIGHTTEXTURE"+r]=!!(this.projectionTexture&&this.projectionTexture.isReady()),t["IESLIGHTTEXTURE"+r]=!!(this._iesProfileTexture&&this._iesProfileTexture.isReady())}}p([f()],a.prototype,"angle",null);p([f()],a.prototype,"innerAngle",null);p([f()],a.prototype,"shadowAngleScale",null);p([f()],a.prototype,"exponent",void 0);p([f()],a.prototype,"projectionTextureLightNear",null);p([f()],a.prototype,"projectionTextureLightFar",null);p([f()],a.prototype,"projectionTextureUpDirection",null);p([C("projectedLightTexture")],a.prototype,"_projectionTexture",void 0);N("BABYLON.SpotLight",a);const D=[{regex:new RegExp("^/nodes/\\d+/extensions/")}];class S{constructor(t,r){this._gltf=t,this._infoTree=r}convert(t){let r=this._gltf,i=this._infoTree,n;if(!t.startsWith("/"))throw new Error("Path must start with a /");const s=t.split("/");if(s.shift(),s[s.length-1].includes(".length")){const c=s[s.length-1].split(".");s.pop(),s.push(...c)}let u=!1;for(const m of s){const c=m==="length";if(c&&!i.__array__)throw new Error(`Path ${t} is invalid`);if(i.__ignoreObjectTree__&&(u=!0),i.__array__&&!c)i=i.__array__;else if(i=i[m],!i)throw new Error(`Path ${t} is invalid`);if(!u)if(r===void 0){if(!D.find(x=>x.regex.test(t)))throw new Error(`Path ${t} is invalid`)}else c||(r=r?.[m]);(i.__target__||c)&&(n=r)}return{object:n,info:i}}}const v={length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonTransformNode),getPropertyName:[()=>"length"]},__array__:{__target__:!0,translation:{type:"Vector3",get:e=>e._babylonTransformNode?.position,set:(e,t)=>t._babylonTransformNode?.position.copyFrom(e),getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"position"]},rotation:{type:"Quaternion",get:e=>e._babylonTransformNode?.rotationQuaternion,set:(e,t)=>t._babylonTransformNode?.rotationQuaternion?.copyFrom(e),getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"rotationQuaternion"]},scale:{type:"Vector3",get:e=>e._babylonTransformNode?.scaling,set:(e,t)=>t._babylonTransformNode?.scaling.copyFrom(e),getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"scaling"]},weights:{length:{type:"number",get:e=>e._numMorphTargets,getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},__array__:{__target__:!0,type:"number",get:(e,t)=>t!==void 0?e._primitiveBabylonMeshes?.[0].morphTargetManager?.getTarget(t).influence:void 0,getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},type:"number[]",get:(e,t)=>[0],getTarget:e=>e._babylonTransformNode,getPropertyName:[()=>"influence"]},matrix:{type:"Matrix",get:e=>l.Compose(e._babylonTransformNode?.scaling,e._babylonTransformNode?.rotationQuaternion,e._babylonTransformNode?.position),getTarget:e=>e._babylonTransformNode,isReadOnly:!0},globalMatrix:{type:"Matrix",get:e=>{const t=l.Identity();let r=e.parent;for(;r&&r.parent;)r=r.parent;const i=e._babylonTransformNode?.position._isDirty||e._babylonTransformNode?.rotationQuaternion?._isDirty||e._babylonTransformNode?.scaling._isDirty;if(r){const n=r._babylonTransformNode?.computeWorldMatrix(!0).invert();n&&e._babylonTransformNode?.computeWorldMatrix(i)?.multiplyToRef(n,t)}else e._babylonTransformNode&&t.copyFrom(e._babylonTransformNode.computeWorldMatrix(i));return t},getTarget:e=>e._babylonTransformNode,isReadOnly:!0},extensions:{EXT_lights_ies:{multiplier:{type:"number",get:e=>e._babylonTransformNode?.getChildren(t=>t instanceof a,!0)[0]?.intensity,getTarget:e=>e._babylonTransformNode?.getChildren(t=>t instanceof a,!0)[0],set:(e,t)=>{if(t._babylonTransformNode){const r=t._babylonTransformNode.getChildren(i=>i instanceof a,!0)[0];r&&(r.intensity=e)}}},color:{type:"Color3",get:e=>e._babylonTransformNode?.getChildren(t=>t instanceof a,!0)[0]?.diffuse,getTarget:e=>e._babylonTransformNode?.getChildren(t=>t instanceof a,!0)[0],set:(e,t)=>{if(t._babylonTransformNode){const r=t._babylonTransformNode.getChildren(i=>i instanceof a,!0)[0];r&&(r.diffuse=e)}}}},KHR_node_visibility:{visible:{type:"boolean",get:e=>e._primitiveBabylonMeshes?e._primitiveBabylonMeshes[0].isVisible:!1,getTarget:()=>{},set:(e,t)=>{t._primitiveBabylonMeshes&&t._primitiveBabylonMeshes.forEach(r=>r.isVisible=e)}}}}}},F={length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonAnimationGroup),getPropertyName:[()=>"length"]},__array__:{}},w={length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t.primitives[0]._instanceData?.babylonSourceMesh),getPropertyName:[()=>"length"]},__array__:{}},A={__array__:{__target__:!0,orthographic:{xmag:{componentsCount:2,type:"Vector2",get:e=>new y(e._babylonCamera?.orthoLeft??0,e._babylonCamera?.orthoRight??0),set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.orthoLeft=e.x,t._babylonCamera.orthoRight=e.y)},getTarget:e=>e,getPropertyName:[()=>"orthoLeft",()=>"orthoRight"]},ymag:{componentsCount:2,type:"Vector2",get:e=>new y(e._babylonCamera?.orthoBottom??0,e._babylonCamera?.orthoTop??0),set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.orthoBottom=e.x,t._babylonCamera.orthoTop=e.y)},getTarget:e=>e,getPropertyName:[()=>"orthoBottom",()=>"orthoTop"]},zfar:{type:"number",get:e=>e._babylonCamera?.maxZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.maxZ=e)},getTarget:e=>e,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:e=>e._babylonCamera?.minZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.minZ=e)},getTarget:e=>e,getPropertyName:[()=>"minZ"]}},perspective:{aspectRatio:{type:"number",get:e=>e._babylonCamera?.getEngine().getAspectRatio(e._babylonCamera),getTarget:e=>e,getPropertyName:[()=>"aspectRatio"],isReadOnly:!0},yfov:{type:"number",get:e=>e._babylonCamera?.fov,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.fov=e)},getTarget:e=>e,getPropertyName:[()=>"fov"]},zfar:{type:"number",get:e=>e._babylonCamera?.maxZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.maxZ=e)},getTarget:e=>e,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:e=>e._babylonCamera?.minZ,set:(e,t)=>{t._babylonCamera&&(t._babylonCamera.minZ=e)},getTarget:e=>e,getPropertyName:[()=>"minZ"]}}}},H={__array__:{__target__:!0,emissiveFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).emissiveColor,set:(e,t,r,i)=>o(t,r,i).emissiveColor.copyFrom(e),getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"emissiveColor"]},emissiveTexture:{extensions:{KHR_texture_transform:g("emissiveTexture")}},normalTexture:{scale:{type:"number",get:(e,t,r)=>h(e,r,"bumpTexture")?.level,set:(e,t,r,i)=>{const n=h(t,i,"bumpTexture");n&&(n.level=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"level"]},extensions:{KHR_texture_transform:g("bumpTexture")}},occlusionTexture:{strength:{type:"number",get:(e,t,r)=>o(e,t,r).ambientTextureStrength,set:(e,t,r,i)=>{const n=o(t,r,i);n&&(n.ambientTextureStrength=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"ambientTextureStrength"]},extensions:{KHR_texture_transform:g("ambientTexture")}},pbrMetallicRoughness:{baseColorFactor:{type:"Color4",get:(e,t,r)=>{const i=o(e,t,r);return R.FromColor3(i.albedoColor,i.alpha)},set:(e,t,r,i)=>{const n=o(t,r,i);n.albedoColor.set(e.r,e.g,e.b),n.alpha=e.a},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"albedoColor",()=>"alpha"]},baseColorTexture:{extensions:{KHR_texture_transform:g("albedoTexture")}},metallicFactor:{type:"number",get:(e,t,r)=>o(e,t,r).metallic,set:(e,t,r,i)=>{const n=o(t,r,i);n&&(n.metallic=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"metallic"]},roughnessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).roughness,set:(e,t,r,i)=>{const n=o(t,r,i);n&&(n.roughness=e)},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"roughness"]},metallicRoughnessTexture:{extensions:{KHR_texture_transform:g("metallicTexture")}}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:{type:"number",get:(e,t,r)=>o(e,t,r).anisotropy.intensity,set:(e,t,r,i)=>{o(t,r,i).anisotropy.intensity=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"anisotropy.intensity"]},anisotropyRotation:{type:"number",get:(e,t,r)=>o(e,t,r).anisotropy.angle,set:(e,t,r,i)=>{o(t,r,i).anisotropy.angle=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"anisotropy.angle"]},anisotropyTexture:{extensions:{KHR_texture_transform:g("anisotropy","texture")}}},KHR_materials_clearcoat:{clearcoatFactor:{type:"number",get:(e,t,r)=>o(e,t,r).clearCoat.intensity,set:(e,t,r,i)=>{o(t,r,i).clearCoat.intensity=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"clearCoat.intensity"]},clearcoatRoughnessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).clearCoat.roughness,set:(e,t,r,i)=>{o(t,r,i).clearCoat.roughness=e},getTarget:(e,t,r)=>o(e,t,r),getPropertyName:[()=>"clearCoat.roughness"]},clearcoatTexture:{extensions:{KHR_texture_transform:g("clearCoat","texture")}},clearcoatNormalTexture:{scale:{type:"number",get:(e,t,r)=>o(e,t,r).clearCoat.bumpTexture?.level,getTarget:o,set:(e,t,r,i)=>o(t,r,i).clearCoat.bumpTexture.level=e},extensions:{KHR_texture_transform:g("clearCoat","bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:g("clearCoat","textureRoughness")}}},KHR_materials_dispersion:{dispersion:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.dispersion,getTarget:o,set:(e,t,r,i)=>o(t,r,i).subSurface.dispersion=e}},KHR_materials_emissive_strength:{emissiveStrength:{type:"number",get:(e,t,r)=>o(e,t,r).emissiveIntensity,getTarget:o,set:(e,t,r,i)=>o(t,r,i).emissiveIntensity=e}},KHR_materials_ior:{ior:{type:"number",get:(e,t,r)=>o(e,t,r).indexOfRefraction,getTarget:o,set:(e,t,r,i)=>o(t,r,i).indexOfRefraction=e}},KHR_materials_iridescence:{iridescenceFactor:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.intensity,getTarget:o,set:(e,t,r,i)=>o(t,r,i).iridescence.intensity=e},iridescenceIor:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.indexOfRefraction,getTarget:o,set:(e,t,r,i)=>o(t,r,i).iridescence.indexOfRefraction=e},iridescenceTexture:{extensions:{KHR_texture_transform:g("iridescence","texture")}},iridescenceThicknessMaximum:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.maximumThickness,getTarget:o,set:(e,t,r,i)=>o(t,r,i).iridescence.maximumThickness=e},iridescenceThicknessMinimum:{type:"number",get:(e,t,r)=>o(e,t,r).iridescence.minimumThickness,getTarget:o,set:(e,t,r,i)=>o(t,r,i).iridescence.minimumThickness=e},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:g("iridescence","thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).sheen.color,getTarget:o,set:(e,t,r,i)=>o(t,r,i).sheen.color.copyFrom(e)},sheenColorTexture:{extensions:{KHR_texture_transform:g("sheen","texture")}},sheenRoughnessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).sheen.intensity,getTarget:o,set:(e,t,r,i)=>o(t,r,i).sheen.intensity=e},sheenRoughnessTexture:{extensions:{KHR_texture_transform:g("sheen","thicknessTexture")}}},KHR_materials_specular:{specularFactor:{type:"number",get:(e,t,r)=>o(e,t,r).metallicF0Factor,getTarget:o,set:(e,t,r,i)=>o(t,r,i).metallicF0Factor=e,getPropertyName:[()=>"metallicF0Factor"]},specularColorFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).metallicReflectanceColor,getTarget:o,set:(e,t,r,i)=>o(t,r,i).metallicReflectanceColor.copyFrom(e),getPropertyName:[()=>"metallicReflectanceColor"]},specularTexture:{extensions:{KHR_texture_transform:g("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:g("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.refractionIntensity,getTarget:o,set:(e,t,r,i)=>o(t,r,i).subSurface.refractionIntensity=e,getPropertyName:[()=>"subSurface.refractionIntensity"]},transmissionTexture:{extensions:{KHR_texture_transform:g("subSurface","refractionIntensityTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.translucencyIntensity,getTarget:o,set:(e,t,r,i)=>o(t,r,i).subSurface.translucencyIntensity=e},diffuseTransmissionTexture:{extensions:{KHR_texture_transform:g("subSurface","translucencyIntensityTexture")}},diffuseTransmissionColorFactor:{type:"Color3",get:(e,t,r)=>o(e,t,r).subSurface.translucencyColor,getTarget:o,set:(e,t,r,i)=>e&&o(t,r,i).subSurface.translucencyColor?.copyFrom(e)},diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:g("subSurface","translucencyColorTexture")}}},KHR_materials_volume:{attenuationColor:{type:"Color3",get:(e,t,r)=>o(e,t,r).subSurface.tintColor,getTarget:o,set:(e,t,r,i)=>o(t,r,i).subSurface.tintColor.copyFrom(e)},attenuationDistance:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.tintColorAtDistance,getTarget:o,set:(e,t,r,i)=>o(t,r,i).subSurface.tintColorAtDistance=e},thicknessFactor:{type:"number",get:(e,t,r)=>o(e,t,r).subSurface.maximumThickness,getTarget:o,set:(e,t,r,i)=>o(t,r,i).subSurface.maximumThickness=e},thicknessTexture:{extensions:{KHR_texture_transform:g("subSurface","thicknessTexture")}}}}}},Z={KHR_lights_punctual:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonLight),getPropertyName:[e=>"length"]},__array__:{__target__:!0,color:{type:"Color3",get:e=>e._babylonLight?.diffuse,set:(e,t)=>t._babylonLight?.diffuse.copyFrom(e),getTarget:e=>e._babylonLight,getPropertyName:[e=>"diffuse"]},intensity:{type:"number",get:e=>e._babylonLight?.intensity,set:(e,t)=>t._babylonLight?t._babylonLight.intensity=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"intensity"]},range:{type:"number",get:e=>e._babylonLight?.range,set:(e,t)=>t._babylonLight?t._babylonLight.range=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"range"]},spot:{innerConeAngle:{type:"number",get:e=>e._babylonLight?.innerAngle,set:(e,t)=>t._babylonLight?t._babylonLight.innerAngle=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"innerConeAngle"]},outerConeAngle:{type:"number",get:e=>e._babylonLight?.angle,set:(e,t)=>t._babylonLight?t._babylonLight.angle=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"outerConeAngle"]}}}}},EXT_lights_area:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonLight),getPropertyName:[e=>"length"]},__array__:{__target__:!0,color:{type:"Color3",get:e=>e._babylonLight?.diffuse,set:(e,t)=>t._babylonLight?.diffuse.copyFrom(e),getTarget:e=>e._babylonLight,getPropertyName:[e=>"diffuse"]},intensity:{type:"number",get:e=>e._babylonLight?.intensity,set:(e,t)=>t._babylonLight?t._babylonLight.intensity=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"intensity"]},size:{type:"number",get:e=>e._babylonLight?.height,set:(e,t)=>t._babylonLight?t._babylonLight.height=e:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"size"]},rect:{aspect:{type:"number",get:e=>e._babylonLight?.width/e._babylonLight?.height,set:(e,t)=>t._babylonLight?t._babylonLight.width=e*t._babylonLight.height:void 0,getTarget:e=>e._babylonLight,getPropertyName:[e=>"aspect"]}}}}},EXT_lights_ies:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonLight),getPropertyName:[e=>"length"]}}},EXT_lights_image_based:{lights:{length:{type:"number",get:e=>e.length,getTarget:e=>e.map(t=>t._babylonTexture),getPropertyName:[e=>"length"]},__array__:{__target__:!0,intensity:{type:"number",get:e=>e._babylonTexture?.level,set:(e,t)=>{t._babylonTexture&&(t._babylonTexture.level=e)},getTarget:e=>e._babylonTexture},rotation:{type:"Quaternion",get:e=>e._babylonTexture&&b.FromRotationMatrix(e._babylonTexture?.getReflectionTextureMatrix()),set:(e,t)=>{t._babylonTexture&&(t._babylonTexture.getScene()?.useRightHandedSystem||(e=b.Inverse(e)),l.FromQuaternionToRef(e,t._babylonTexture.getReflectionTextureMatrix()))},getTarget:e=>e._babylonTexture}}}}};function h(e,t,r,i){const n=o(e);return i?n[r][i]:n[r]}function o(e,t,r){return e._data?.[r?.fillMode??M.MATERIAL_TriangleFillMode]?.babylonMaterial}function g(e,t){return{offset:{componentsCount:2,type:"Vector2",get:(r,i,n)=>{const s=h(r,n,e,t);return new y(s?.uOffset,s?.vOffset)},getTarget:o,set:(r,i,n,s)=>{const u=h(i,s,e,t);u.uOffset=r.x,u.vOffset=r.y},getPropertyName:[()=>`${e}${t?"."+t:""}.uOffset`,()=>`${e}${t?"."+t:""}.vOffset`]},rotation:{type:"number",get:(r,i,n)=>h(r,n,e,t)?.wAng,getTarget:o,set:(r,i,n,s)=>h(i,s,e,t).wAng=r,getPropertyName:[()=>`${e}${t?"."+t:""}.wAng`]},scale:{componentsCount:2,type:"Vector2",get:(r,i,n)=>{const s=h(r,n,e,t);return new y(s?.uScale,s?.vScale)},getTarget:o,set:(r,i,n,s)=>{const u=h(i,s,e,t);u.uScale=r.x,u.vScale=r.y},getPropertyName:[()=>`${e}${t?"."+t:""}.uScale`,()=>`${e}${t?"."+t:""}.vScale`]}}}const T={cameras:A,nodes:v,materials:H,extensions:Z,animations:F,meshes:w};function E(e){return new S(e,T)}function B(e){const t=e.split("/").map(i=>i.replace(/{}/g,"__array__"));let r=T;for(const i of t)i&&(r=r[i]);if(r&&r.type&&r.get)return r}function k(e,t){const r=e.split("/").map(n=>n.replace(/{}/g,"__array__"));let i=T;for(const n of r)n&&(i=i[n]);i&&i.type&&i.get&&(i.interpolation=t)}function z(e,t){const r=e.split("/").map(n=>n.replace(/{}/g,"__array__"));let i=T;for(const n of r)if(n){if(!i[n]){if(n==="?"){i.__ignoreObjectTree__=!0;continue}i[n]={},n==="__array__"&&(i[n].__target__=!0)}i=i[n]}Object.assign(i,t)}export{z as A,E as G,k as S,a,B as b};
