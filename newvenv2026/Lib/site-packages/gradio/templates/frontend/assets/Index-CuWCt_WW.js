import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as be,onMount as De,onDestroy as Pe,tick as _e}from"./svelte/svelte_svelte.js";import"./i18n-CyvX8KmK.js";import{G as ze}from"./utils.svelte-Ceck75cM.js";import{g as Be,I as Ee}from"./ImagePreview-CBoeGuoF.js";import"./svelte/svelte_internal_flags_legacy.js";import{W as Ue,G as Me,y as Se,H as We,i as qe,K as Re,b as Te,d as Ie,c as Fe,I as Ce,l as Le,o as je,B as we,U as ye,E as Ae}from"./IconButtonWrapper-D4LMIc_2.js";import{F as Ge}from"./FullscreenButton-CdZP1GYm.js";import{a as He,S as ke}from"./StreamingBar-C6ky6DsM.js";import{p as Oe,F as Ne}from"./index-Dw8Uzof1.js";import{fade as Ke}from"./svelte/svelte_transition.js";import{U as Ve,a as Je}from"./ModifyUpload-2md6CVWe.js";import{I as Qe}from"./Image-Bdf4wQSw.js";import{default as Xt}from"./Example-1lv5JGKJ.js";import"./svelte/svelte_store.js";import"./ShareButton-DGzDjeX1.js";import"./MarkdownCode-C7jLnxqj.js";import"./prism-python-B1e-54E9.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_events.js";var Xe=e.from_html('<button class="svelte-1dqolfz"><div class="wrap svelte-1dqolfz"><span class="icon-wrap svelte-1dqolfz"><!></span> </div></button>');function Ye(j,s){e.push(s,!1);const d=be();e.init();var l=Xe();e.set_style(l,"",{},{height:"100%"});var E=e.child(l),k=e.child(E),t=e.child(k);Ue(t),e.reset(k);var i=e.sibling(k);i.nodeValue=" Click to Access Webcam",e.reset(E),e.reset(l),e.event("click",l,()=>d("click")),e.append(j,l),e.pop()}function Ze(){return navigator.mediaDevices.enumerateDevices()}function $e(j,s){s.srcObject=j,s.muted=!0,s.play()}async function xe(j,s,d,l){const E={video:l?{deviceId:{exact:l},...d?.video}:d?.video||{width:{ideal:1920},height:{ideal:1440}},audio:j&&(d?.audio??!0)};return navigator.mediaDevices.getUserMedia(E).then(k=>($e(k,s),k))}function et(j){return j.filter(d=>d.kind==="videoinput")}var tt=e.from_html('<div title="grant webcam access" style="height: 100%"><!></div>'),rt=e.from_html('<div class="icon-with-text svelte-1tktvmr" style="width:var(--size-24);"><div class="icon color-primary svelte-1tktvmr" title="spinner"><!></div> </div>'),at=e.from_html('<div class="icon-with-text svelte-1tktvmr"><div class="icon color-primary svelte-1tktvmr" title="stop recording"><!></div> </div>'),st=e.from_html('<div class="icon-with-text svelte-1tktvmr"><div class="icon color-primary svelte-1tktvmr" title="start recording"><!></div> </div>'),lt=e.from_html('<div class="icon svelte-1tktvmr" title="capture photo"><!></div>'),it=e.from_html('<button class="icon svelte-1tktvmr" aria-label="select input source"><!></button>'),nt=e.from_html('<option class="svelte-1tktvmr"> </option>'),ot=e.from_html('<option class="svelte-1tktvmr"> </option>'),dt=e.from_html('<select class="select-wrap svelte-1tktvmr" aria-label="select source"><!></select>'),ut=e.from_html('<div class="button-wrap svelte-1tktvmr"><button class="svelte-1tktvmr"><!></button> <!></div> <!>',1),ct=e.from_html('<div class="wrap svelte-1tktvmr"><!>  <video></video> <img/> <!></div>',2);function _t(j,s){e.push(s,!1);let d=e.mutable_source(),l=e.mutable_source([]),E=e.mutable_source(null),k=e.prop(s,"stream_state",12,"closed"),t,i=e.prop(s,"streaming",12,!1),x=e.prop(s,"pending",12,!1),U=e.prop(s,"root",12,""),G=e.prop(s,"stream_every",12,1),D=e.prop(s,"mode",12,"image"),H=e.prop(s,"mirror_webcam",12),N=e.prop(s,"include_audio",12),K=e.prop(s,"webcam_constraints",12,null),w=e.prop(s,"i18n",12),Z=e.prop(s,"upload",12),O=e.prop(s,"value",12,null),$=e.prop(s,"time_limit",12,null);const g=be();De(()=>{t=document.createElement("canvas"),i()&&D()==="image"&&window.setInterval(()=>{e.get(d)&&!x()&&M()},G()*1e3)});const m=async a=>{const h=a.target.value;await xe(N(),e.get(d),K(),h).then(async W=>{S=W,e.set(E,e.get(l).find(ne=>ne.deviceId===h)||null),e.set(T,!1)})};async function V(){try{xe(N(),e.get(d),K()).then(async a=>{e.set(R,!0),e.set(l,await Ze()),S=a}).then(()=>et(e.get(l))).then(a=>{e.set(l,a);const c=S.getTracks().map(h=>h.getSettings()?.deviceId)[0];e.set(E,c&&a.find(h=>h.deviceId===c)||e.get(l)[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&g("error",w()("image.no_webcam_support"))}catch(a){if(a instanceof DOMException&&a.name=="NotAllowedError")g("error",w()("image.allow_webcam_access"));else throw a}}function M(){if((!i()||i()&&e.get(u))&&e.get(d).videoWidth&&e.get(d).videoHeight){var a=t.getContext("2d");if(t.width=e.get(d).videoWidth,t.height=e.get(d).videoHeight,a.drawImage(e.get(d),0,0,e.get(d).videoWidth,e.get(d).videoHeight),H()&&(a.scale(-1,1),a.drawImage(e.get(d),-e.get(d).videoWidth,0)),i()&&(!e.get(u)||k()==="waiting"))return;if(i()){const c=t.toDataURL("image/jpeg");g("stream",c);return}t.toBlob(c=>{g(i()?"stream":"capture",c)},`image/${i()?"jpeg":"png"}`,.8)}}let u=e.mutable_source(!1),J=[],S,q,I;function se(){if(e.get(u)){I.stop();let a=new Blob(J,{type:q}),c=new FileReader;c.onload=async function(h){if(h.target){let W=new File([a],"sample."+q.substring(6));const ne=await Oe([W]);let ce=(await Z()(ne,U()))?.filter(Boolean)[0];g("capture",ce),g("stop_recording")}},c.readAsDataURL(a)}else if(typeof MediaRecorder<"u"){g("start_recording"),J=[];let a=["video/webm","video/mp4"];for(let c of a)if(MediaRecorder.isTypeSupported(c)){q=c;break}if(q===null){console.error("No supported MediaRecorder mimeType");return}I=new MediaRecorder(S,{mimeType:q}),I.addEventListener("dataavailable",function(c){J.push(c.data)}),I.start(200)}e.set(u,!e.get(u))}let R=e.mutable_source(!1);function re({destroy:a}={}){D()==="image"&&i()&&e.set(u,!e.get(u)),a||(D()==="image"?M():se()),!e.get(u)&&S&&g("close_stream")}let T=e.mutable_source(!1);function F(a,c){const h=W=>{a&&!a.contains(W.target)&&!W.defaultPrevented&&c(W)};return document.addEventListener("click",h,!0),{destroy(){document.removeEventListener("click",h,!0)}}}function n(a){a.preventDefault(),a.stopPropagation(),e.set(T,!1)}Pe(()=>{typeof window>"u"||(re({destroy:!0}),S?.getTracks().forEach(a=>a.stop()))});var ge={click_outside:F,get stream_state(){return k()},set stream_state(a){k(a),e.flush()},get streaming(){return i()},set streaming(a){i(a),e.flush()},get pending(){return x()},set pending(a){x(a),e.flush()},get root(){return U()},set root(a){U(a),e.flush()},get stream_every(){return G()},set stream_every(a){G(a),e.flush()},get mode(){return D()},set mode(a){D(a),e.flush()},get mirror_webcam(){return H()},set mirror_webcam(a){H(a),e.flush()},get include_audio(){return N()},set include_audio(a){N(a),e.flush()},get webcam_constraints(){return K()},set webcam_constraints(a){K(a),e.flush()},get i18n(){return w()},set i18n(a){w(a),e.flush()},get upload(){return Z()},set upload(a){Z(a),e.flush()},get value(){return O()},set value(a){O(a),e.flush()},get time_limit(){return $()},set time_limit(a){$(a),e.flush()}};e.init();var ee=ct(),oe=e.child(ee);He(oe,{get time_limit(){return $()}});var le=e.sibling(oe,2);let de;e.bind_this(le,a=>e.set(d,a),()=>e.get(d));var A=e.sibling(le,2);let ae;var ie=e.sibling(A,2);{var ue=a=>{var c=tt(),h=e.child(c);Ye(h,{$$events:{click:async()=>V()}}),e.reset(c),e.transition(1,c,()=>Ke,()=>({delay:100,duration:200})),e.append(a,c)},Q=a=>{var c=ut(),h=e.first_child(c),W=e.child(h),ne=e.child(W);{var ce=v=>{var o=e.comment(),y=e.first_child(o);{var p=b=>{var _=rt(),f=e.child(_),C=e.child(f);We(C),e.reset(f);var L=e.sibling(f);e.reset(_),e.template_effect(B=>e.set_text(L,` ${B??""}`),[()=>(e.deep_read_state(w()),e.untrack(()=>w()("audio.waiting")))]),e.append(b,_)},X=b=>{var _=e.comment(),f=e.first_child(_);{var C=B=>{var te=at(),Y=e.child(te),ve=e.child(Y);qe(ve,{}),e.reset(Y);var fe=e.sibling(Y);e.reset(te),e.template_effect(he=>e.set_text(fe,` ${he??""}`),[()=>(e.deep_read_state(w()),e.untrack(()=>w()("audio.stop")))]),e.append(B,te)},L=B=>{var te=st(),Y=e.child(te),ve=e.child(Y);Re(ve),e.reset(Y);var fe=e.sibling(Y);e.reset(te),e.template_effect(he=>e.set_text(fe,` ${he??""}`),[()=>(e.deep_read_state(w()),e.untrack(()=>w()("audio.record")))]),e.append(B,te)};e.if(f,B=>{i()&&k()==="open"||!i()&&e.get(u)?B(C):B(L,!1)},!0)}e.append(b,_)};e.if(y,b=>{i()&&k()==="waiting"?b(p):b(X,!1)})}e.append(v,o)},pe=v=>{var o=lt(),y=e.child(o);Me(y),e.reset(o),e.append(v,o)};e.if(ne,v=>{D()==="video"||i()?v(ce):v(pe,!1)})}e.reset(W);var me=e.sibling(W,2);{var r=v=>{var o=it(),y=e.child(o);Se(y),e.reset(o),e.event("click",o,()=>e.set(T,!0)),e.append(v,o)};e.if(me,v=>{e.get(u)||v(r)})}e.reset(h);var P=e.sibling(h,2);{var z=v=>{var o=dt(),y=e.child(o);{var p=b=>{var _=nt(),f=e.child(_,!0);e.reset(_),_.value=_.__value="",e.template_effect(C=>e.set_text(f,C),[()=>(e.deep_read_state(w()),e.untrack(()=>w()("common.no_devices")))]),e.append(b,_)},X=b=>{var _=e.comment(),f=e.first_child(_);e.each(f,1,()=>e.get(l),e.index,(C,L)=>{var B=ot(),te=e.child(B,!0);e.reset(B);var Y={};e.template_effect(()=>{e.set_selected(B,(e.get(E),e.get(L),e.untrack(()=>e.get(E).deviceId===e.get(L).deviceId))),e.set_text(te,(e.get(L),e.untrack(()=>e.get(L).label))),Y!==(Y=(e.get(L),e.untrack(()=>e.get(L).deviceId)))&&(B.value=(B.__value=(e.get(L),e.untrack(()=>e.get(L).deviceId)))??"")}),e.append(C,B)}),e.append(b,_)};e.if(y,b=>{e.get(l),e.untrack(()=>e.get(l).length===0)?b(p):b(X,!1)})}e.reset(o),e.action(o,(b,_)=>F?.(b,_),()=>n),e.effect(()=>e.event("change",o,m)),e.append(v,o)};e.if(P,v=>{e.get(T)&&e.get(E)&&v(z)})}e.template_effect(()=>e.set_attribute(W,"aria-label",D()==="image"?"capture photo":"start recording")),e.event("click",W,()=>re()),e.append(a,c)};e.if(ie,a=>{e.get(R)?a(Q,!1):a(ue)})}return e.reset(ee),e.template_effect(()=>{de=e.set_class(le,1,"svelte-1tktvmr",null,de,{flip:H(),hide:!e.get(R)||e.get(R)&&!!O()}),e.set_attribute(A,"src",(e.deep_read_state(O()),e.untrack(()=>O()?.url))),ae=e.set_class(A,1,"svelte-1tktvmr",null,ae,{hide:!e.get(R)||e.get(R)&&!O()})}),e.append(j,ee),e.bind_prop(s,"click_outside",F),e.pop(ge)}var gt=e.from_html("<!> <!>",1),pt=e.from_html("<div><!></div>"),mt=e.from_html('<!> <div data-testid="image" class="image-container svelte-6uxbr3"><!> <div><!> <!></div> <!></div>',1);function vt(j,s){e.push(s,!1);const d=e.mutable_source();let l=e.prop(s,"value",12,null),E=e.prop(s,"label",12,void 0),k=e.prop(s,"show_label",12),t=e.prop(s,"sources",28,()=>["upload","clipboard","webcam"]),i=e.prop(s,"streaming",12,!1),x=e.prop(s,"pending",12,!1),U=e.prop(s,"webcam_options",12),G=e.prop(s,"selectable",12,!1),D=e.prop(s,"root",12),H=e.prop(s,"i18n",12),N=e.prop(s,"max_file_size",12,null),K=e.prop(s,"upload",12),w=e.prop(s,"stream_handler",12),Z=e.prop(s,"stream_every",12),O=e.prop(s,"time_limit",12),$=e.prop(s,"show_fullscreen_button",12,!0),g=e.prop(s,"stream_state",12,"closed"),m=e.prop(s,"upload_promise",12,null),V=e.mutable_source(),M=e.prop(s,"uploading",12,!1),u=e.prop(s,"active_source",12,null),J=e.prop(s,"fullscreen",12,!1),S=e.mutable_source([]),q=e.mutable_source();async function I({detail:r}){if(!i()){if(r.path?.toLowerCase().endsWith(".svg")&&r.url){const z=await(await fetch(r.url)).text();l({...r,url:`data:image/svg+xml,${encodeURIComponent(z)}`})}else l(r);await _e(),T("upload")}}function se(){l(null),T("clear"),T("change",null)}function R(r){se(),r.stopPropagation()}async function re(r,P){if(P==="stream"){T("stream",{value:{url:r},is_value_data:!0});return}e.set(q,Math.random().toString(36).substring(2,15));const z=new File([r],`image.${i()?"jpeg":"png"}`);e.set(S,[new Ne({path:z.name,orig_name:z.name,blob:z,size:z.size,mime_type:z.type,is_stream:!1})]),x(!0);const v=await e.get(V).load_files([z],e.get(q));(P==="change"||P==="upload")&&(l(v?.[0]||null),await _e(),T("change")),x(!1)}const T=be();let F=e.prop(s,"dragging",12,!1);function n(r){let P=Be(r);P&&T("select",{index:P,value:null})}async function ge(r){switch(r){case"clipboard":e.get(V).paste_clipboard();break}}let ee=e.mutable_source();function oe(r){r.preventDefault(),r.stopPropagation(),r.dataTransfer&&(r.dataTransfer.dropEffect="copy"),F(!0)}async function le(r){r.preventDefault(),r.stopPropagation(),F(!1),l()&&(se(),await _e()),u("upload"),await _e(),e.get(V).load_files_from_drop(r)}e.legacy_pre_effect(()=>(e.deep_read_state(u()),e.deep_read_state(t())),()=>{!u()&&t()&&u(t()[0])}),e.legacy_pre_effect(()=>(e.deep_read_state(i()),e.deep_read_state(u())),()=>{e.set(d,i()&&u()==="webcam")}),e.legacy_pre_effect(()=>(e.deep_read_state(M()),e.get(d)),()=>{M()&&!e.get(d)&&l(null)}),e.legacy_pre_effect(()=>e.deep_read_state(F()),()=>{T("drag",F())}),e.legacy_pre_effect_reset();var de={get value(){return l()},set value(r){l(r),e.flush()},get label(){return E()},set label(r){E(r),e.flush()},get show_label(){return k()},set show_label(r){k(r),e.flush()},get sources(){return t()},set sources(r){t(r),e.flush()},get streaming(){return i()},set streaming(r){i(r),e.flush()},get pending(){return x()},set pending(r){x(r),e.flush()},get webcam_options(){return U()},set webcam_options(r){U(r),e.flush()},get selectable(){return G()},set selectable(r){G(r),e.flush()},get root(){return D()},set root(r){D(r),e.flush()},get i18n(){return H()},set i18n(r){H(r),e.flush()},get max_file_size(){return N()},set max_file_size(r){N(r),e.flush()},get upload(){return K()},set upload(r){K(r),e.flush()},get stream_handler(){return w()},set stream_handler(r){w(r),e.flush()},get stream_every(){return Z()},set stream_every(r){Z(r),e.flush()},get time_limit(){return O()},set time_limit(r){O(r),e.flush()},get show_fullscreen_button(){return $()},set show_fullscreen_button(r){$(r),e.flush()},get stream_state(){return g()},set stream_state(r){g(r),e.flush()},get upload_promise(){return m()},set upload_promise(r){m(r),e.flush()},get uploading(){return M()},set uploading(r){M(r),e.flush()},get active_source(){return u()},set active_source(r){u(r),e.flush()},get fullscreen(){return J()},set fullscreen(r){J(r),e.flush()},get dragging(){return F()},set dragging(r){F(r),e.flush()}};e.init();var A=mt(),ae=e.first_child(A);{let r=e.derived_safe_equal(()=>E()||"Image");Te(ae,{get show_label(){return k()},get Icon(){return Ie},get label(){return e.get(r)}})}var ie=e.sibling(ae,2),ue=e.child(ie);Fe(ue,{children:(r,P)=>{var z=e.comment(),v=e.first_child(z);{var o=y=>{var p=gt(),X=e.first_child(p);{var b=f=>{Ge(f,{get fullscreen(){return J()},$$events:{fullscreen(C){e.bubble_event.call(this,s,C)}}})};e.if(X,f=>{$()&&f(b)})}var _=e.sibling(X,2);Ce(_,{get Icon(){return Le},label:"Remove Image",$$events:{click:R}}),e.append(y,p)};e.if(v,y=>{e.deep_read_state(l()),e.get(d),e.untrack(()=>l()?.url&&!e.get(d))&&y(o)})}e.append(r,z)},$$slots:{default:!0}});var Q=e.sibling(ue,2);let a,c;var h=e.child(Q);{let r=e.derived_safe_equal(()=>l()!==null||u()==="webcam"),P=e.derived_safe_equal(()=>u()==="clipboard"?"clipboard":"image/*"),z=e.derived_safe_equal(()=>(e.deep_read_state(t()),e.deep_read_state(l()),e.untrack(()=>!t().includes("upload")||l()!==null))),v=e.derived_safe_equal(()=>(e.deep_read_state(H()),e.untrack(()=>H()("image.drop_to_upload"))));e.bind_this(Ve(h,{get hidden(){return e.get(r)},get filetype(){return e.get(P)},get root(){return D()},get max_file_size(){return N()},get disable_click(){return e.get(z)},get upload(){return K()},get stream_handler(){return w()},get aria_label(){return e.get(v)},get upload_promise(){return m()},set upload_promise(o){m(o)},get uploading(){return M()},set uploading(o){M(o)},get dragging(){return F()},set dragging(o){F(o)},$$events:{load:I,error(o){e.bubble_event.call(this,s,o)}},children:(o,y)=>{var p=e.comment(),X=e.first_child(p);{var b=_=>{var f=e.comment(),C=e.first_child(f);e.slot(C,s,"default",{},null),e.append(_,f)};e.if(X,_=>{l()===null&&_(b)})}e.append(o,p)},$$slots:{default:!0},$$legacy:!0}),o=>e.set(V,o),()=>e.get(V))}var W=e.sibling(h,2);{var ne=r=>{Je(r,{get root(){return D()},get upload_id(){return e.get(q)},get stream_handler(){return w()},get files(){return e.get(S)}})},ce=r=>{var P=e.comment(),z=e.first_child(P);{var v=y=>{_t(y,{get root(){return D()},get value(){return l()},get stream_state(){return g()},get mirror_webcam(){return e.deep_read_state(U()),e.untrack(()=>U().mirror)},get stream_every(){return Z()},get streaming(){return i()},mode:"image",include_audio:!1,get i18n(){return H()},get upload(){return K()},get time_limit(){return O()},get webcam_constraints(){return e.deep_read_state(U()),e.untrack(()=>U().constraints)},$$events:{capture:p=>re(p.detail,"change"),stream:p=>re(p.detail,"stream"),error(p){e.bubble_event.call(this,s,p)},drag(p){e.bubble_event.call(this,s,p)},upload:p=>re(p.detail,"upload"),close_stream(p){e.bubble_event.call(this,s,p)}}})},o=y=>{var p=e.comment(),X=e.first_child(p);{var b=_=>{var f=pt();let C;var L=e.child(f);{let B=e.derived_safe_equal(()=>(e.deep_read_state(l()),e.untrack(()=>({alt:l().alt_text}))));Qe(L,{get src(){return e.deep_read_state(l()),e.untrack(()=>l().url)},get restProps(){return e.get(B)}})}e.reset(f),e.template_effect(()=>C=e.set_class(f,1,"image-frame svelte-6uxbr3",null,C,{selectable:G()})),e.event("click",f,n),e.append(_,f)};e.if(X,_=>{l()!==null&&!i()&&_(b)},!0)}e.append(y,p)};e.if(z,y=>{u()==="webcam"&&(i()||!i()&&!l())?y(v):y(o,!1)},!0)}e.append(r,P)};e.if(W,r=>{u()==="webcam"&&!i()&&x()?r(ne):r(ce,!1)})}e.reset(Q);var pe=e.sibling(Q,2);{var me=r=>{je(r,{get sources(){return t()},handle_clear:se,handle_select:ge,get active_source(){return u()},set active_source(P){u(P)},$$legacy:!0})};e.if(pe,r=>{e.deep_read_state(t()),e.untrack(()=>t().length>1||t().includes("clipboard"))&&r(me)})}return e.reset(ie),e.bind_this(ie,r=>e.set(ee,r),()=>e.get(ee)),e.template_effect(()=>{a=e.set_class(Q,1,"upload-container svelte-6uxbr3",null,a,{"reduced-height":t().length>1}),c=e.set_style(Q,"",c,{width:l()?"auto":"100%"})}),e.event("dragover",Q,oe),e.event("drop",Q,le),e.append(j,A),e.pop(de)}var ft=e.from_html("<!> <!>",1),ht=e.from_html("<!> <!>",1);function Vt(j,s){e.push(s,!0);let d={value:null},l=e.state(void 0);class E extends ze{async get_data(){e.get(l)&&(await e.get(l),await _e());const m=await super.get_data();return s.props.streaming&&(m.value=d.value),m}}const k=e.rest_props(s,["$$slots","$$events","$$legacy"]),t=new E(k);let i=e.state(!1),x=e.state(!1),U=e.derived(()=>t.props.sources?t.props.sources[0]:null),G;const D=g=>{const m=g;m.preventDefault(),m.stopPropagation(),m.type==="dragenter"||m.type==="dragover"?e.set(x,!0):m.type==="dragleave"&&e.set(x,!1)},H=g=>{if(t.shared.interactive){const m=g;m.preventDefault(),m.stopPropagation(),e.set(x,!1),G&&G.loadFilesFromDrop(m)}};let N=e.state(e.proxy(t.props.value));e.user_effect(()=>{e.get(N)!=t.props.value&&(e.set(N,t.props.value,!0),t.dispatch("change"))});let K=e.derived(()=>t?.shared?.loading_status.stream_state);var w=e.comment(),Z=e.first_child(w);{var O=g=>{{let m=e.derived(()=>e.get(x)?"focus":"base"),V=e.derived(()=>t.props.height||void 0);we(g,{get visible(){return t.shared.visible},variant:"solid",get border_mode(){return e.get(m)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(V)},get width(){return t.props.width},allow_overflow:!1,get container(){return t.shared.container},"scale{gradio.shared.scale}":!0,get min_width(){return t.shared.min_width},get fullscreen(){return e.get(i)},set fullscreen(M){e.set(i,M,!0)},children:(M,u)=>{var J=ft(),S=e.first_child(J);ke(S,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var q=e.sibling(S,2);Ee(q,{get fullscreen(){return e.get(i)},get value(){return t.props.value},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get selectable(){return t.props._selectable},get i18n(){return t.i18n},get buttons(){return t.props.buttons},on_custom_button_click:I=>{t.dispatch("custom_button_click",{id:I})},$$events:{select:({detail:I})=>t.dispatch("select",I),share:({detail:I})=>t.dispatch("share",I),error:({detail:I})=>t.dispatch("error",I),fullscreen:({detail:I})=>{e.set(i,I,!0)}}}),e.append(M,J)},$$slots:{default:!0}})}},$=g=>{{let m=e.derived(()=>t.props.value===null?"dashed":"solid"),V=e.derived(()=>e.get(x)?"focus":"base"),M=e.derived(()=>t.props.height||void 0);we(g,{get visible(){return t.shared.visible},get variant(){return e.get(m)},get border_mode(){return e.get(V)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(M)},get width(){return t.props.width},allow_overflow:!1,get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},get fullscreen(){return e.get(i)},set fullscreen(u){e.set(i,u,!0)},$$events:{dragenter:D,dragleave:D,dragover:D,drop:H},children:(u,J)=>{var S=ht(),q=e.first_child(S);{var I=R=>{ke(R,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}))};e.if(q,R=>{t.shared.loading_status.type==="output"&&R(I)})}var se=e.sibling(q,2);{let R=e.derived(()=>t.props.buttons===null?!0:t.props.buttons.some(n=>typeof n=="string"&&n==="fullscreen")),re=e.derived(()=>t.shared.loading_status?.status==="pending"||t.shared.loading_status?.status==="streaming"),T=e.derived(()=>t.shared.loading_status?.time_limit),F=e.derived(()=>t.shared.client?.stream);e.bind_this(vt(se,{get selectable(){return t.props._selectable},get root(){return t.shared.root},get sources(){return t.props.sources},get fullscreen(){return e.get(i)},get show_fullscreen_button(){return e.get(R)},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get pending(){return e.get(re)},get streaming(){return t.props.streaming},get webcam_options(){return t.props.webcam_options},get stream_every(){return t.props.stream_every},get time_limit(){return e.get(T)},get max_file_size(){return t.shared.max_file_size},get i18n(){return t.i18n},upload:(...n)=>t.shared.client.upload(...n),get stream_handler(){return e.get(F)},get stream_state(){return e.get(K)},get upload_promise(){return e.get(l)},set upload_promise(n){e.set(l,n,!0)},get active_source(){return e.get(U)},set active_source(n){e.set(U,n)},get value(){return t.props.value},set value(n){t.props.value=n},get dragging(){return e.get(x)},set dragging(n){e.set(x,n,!0)},$$events:{edit:()=>t.dispatch("edit"),clear:()=>{e.set(i,!1),t.dispatch("clear"),t.dispatch("input")},stream:({detail:n})=>{d=n,t.dispatch("stream",n)},drag:({detail:n})=>e.set(x,n,!0),upload:()=>{t.dispatch("upload"),t.dispatch("input")},select:({detail:n})=>t.dispatch("select",n),share:({detail:n})=>t.dispatch("share",n),error:({detail:n})=>{t.shared.loading_status.status="error",t.dispatch("error",n)},close_stream:()=>{t.dispatch("close_stream")},fullscreen:({detail:n})=>{e.set(i,n,!0)}},children:(n,ge)=>{var ee=e.comment(),oe=e.first_child(ee);{var le=A=>{ye(A,{get i18n(){return t.i18n},type:"image",get placeholder(){return t.props.placeholder}})},de=A=>{var ae=e.comment(),ie=e.first_child(ae);{var ue=a=>{ye(a,{get i18n(){return t.i18n},type:"clipboard",mode:"short"})},Q=a=>{Ae(a,{unpadded_box:!0,size:"large",children:(c,h)=>{Ie(c)},$$slots:{default:!0}})};e.if(ie,a=>{e.get(U)==="clipboard"?a(ue):a(Q,!1)},!0)}e.append(A,ae)};e.if(oe,A=>{e.get(U)==="upload"||!e.get(U)?A(le):A(de,!1)})}e.append(n,ee)},$$slots:{default:!0}}),n=>G=n,()=>G)}e.append(u,S)},$$slots:{default:!0}})}};e.if(Z,g=>{t.shared.interactive?g($,!1):g(O)})}e.append(j,w),e.pop()}export{Xt as BaseExample,Qe as BaseImage,vt as BaseImageUploader,Ee as BaseStaticImage,_t as Webcam,Vt as default};
